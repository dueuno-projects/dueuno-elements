<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Dueuno Elements</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Dueuno Elements</h1>
<div class="details">
<span id="revnumber">version 2.x-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_quick_start">Quick Start</a>
<ul class="sectlevel2">
<li><a href="#_goals">Goals</a></li>
<li><a href="#_non_goals">Non-Goals</a></li>
<li><a href="#_try_it_out">Try it out</a></li>
</ul>
</li>
<li><a href="#_basics">Basics</a>
<ul class="sectlevel2">
<li><a href="#_the_shell">The Shell</a></li>
<li><a href="#_project_structure">Project Structure</a></li>
<li><a href="#_features">Features</a></li>
<li><a href="#_controllers">Controllers</a></li>
<li><a href="#_services">Services</a></li>
<li><a href="#_domain">Domain</a></li>
<li><a href="#_database_connections">Database Connections</a></li>
<li><a href="#_tenants">Tenants</a></li>
<li><a href="#_user_management">User Management</a></li>
</ul>
</li>
<li><a href="#building-crud">CRUD</a></li>
<li><a href="#_whats_next">What&#8217;s next?</a></li>
<li><a href="#">---</a></li>
<li><a href="#dueuno-elements-book">The Dueuno Elements Book</a>
<ul class="sectlevel2">
<li><a href="#_the_90s">The 90s</a></li>
<li><a href="#_full_stack_developers">Full-Stack Developers</a></li>
<li><a href="#_the_rest_of_us">The rest of us</a></li>
<li><a href="#_i_dont_like_writing_web_applications">I donâ€™t like writing web applications</a></li>
<li><a href="#_dueuno_elements">Dueuno Elements</a></li>
</ul>
</li>
<li><a href="#_application_basics">Application Basics</a>
<ul class="sectlevel2">
<li><a href="#_grails">Grails</a></li>
<li><a href="#_dueuno_elements_2">Dueuno Elements</a></li>
<li><a href="#_first_execution">First Execution</a></li>
</ul>
</li>
<li><a href="#_application_structure">Application Structure</a>
<ul class="sectlevel2">
<li><a href="#_features_2">Features</a></li>
<li><a href="#_controllers_and_actions">Controllers and Actions</a></li>
<li><a href="#_controller_structure">Controller Structure</a></li>
<li><a href="#_controller_implementation">Controller Implementation</a></li>
</ul>
</li>
<li><a href="#_project_setup">Project Setup</a>
<ul class="sectlevel2">
<li><a href="#_spring_dev_tools">Spring Dev Tools</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_git">Git</a></li>
</ul>
</li>
<li><a href="#_first_real_application">First Real Application</a>
<ul class="sectlevel2">
<li><a href="#_database_setup">Database Setup</a></li>
<li><a href="#_business_logic">Business Logic</a></li>
<li><a href="#_user_interface">User Interface</a></li>
</ul>
</li>
<li><a href="#_application_branding">Application Branding</a>
<ul class="sectlevel2">
<li><a href="#_logo">Logo</a></li>
<li><a href="#_colors">Colors</a></li>
<li><a href="#_logs">Logs</a></li>
</ul>
</li>
<li><a href="#_responsive_design">Responsive Design</a>
<ul class="sectlevel2">
<li><a href="#_getting_ready">Getting ready</a></li>
<li><a href="#_12_laptop">12" Laptop</a></li>
<li><a href="#_14_touchscreen_laptop">14" Touchscreen Laptop</a></li>
<li><a href="#_apple_ipad">Apple iPad</a></li>
<li><a href="#_apple_iphone">Apple iPhone</a></li>
<li><a href="#_meta_quest_2">Meta Quest 2</a></li>
<li><a href="#_conclusions">Conclusions</a></li>
</ul>
</li>
<li><a href="#_one_to_many_relationships">One-to-Many Relationships</a>
<ul class="sectlevel2">
<li><a href="#_the_domain">The Domain</a></li>
<li><a href="#_the_services">The Services</a></li>
<li><a href="#_the_controllers">The Controllers</a></li>
<li><a href="#_the_features">The Features</a></li>
</ul>
</li>
<li><a href="#_table">Table</a>
<ul class="sectlevel2">
<li><a href="#_sample_crud">Sample CRUD</a></li>
<li><a href="#_loading_data">Loading Data</a></li>
<li><a href="#_row_actions">Row Actions</a></li>
<li><a href="#_group_actions">Group Actions</a></li>
<li><a href="#_filters">Filters</a></li>
<li><a href="#_pagination">Pagination</a></li>
</ul>
</li>
<li><a href="#_buttons">Buttons</a>
<ul class="sectlevel2">
<li><a href="#_anatomy_of_a_button">Anatomy of a Button</a></li>
<li><a href="#_actions">Actions</a></li>
</ul>
</li>
<li><a href="#_2">---</a></li>
<li><a href="#api-reference">API Reference</a>
<ul class="sectlevel2">
<li><a href="#_create_an_application">Create an application</a></li>
<li><a href="#_optional_steps">Optional steps</a></li>
<li><a href="#_login_2">Login</a></li>
<li><a href="#_url_path">URL Path</a></li>
</ul>
</li>
<li><a href="#application">Application</a>
<ul class="sectlevel2">
<li><a href="#_init">init()</a></li>
<li><a href="#_beforeinit">beforeInit()</a></li>
<li><a href="#_afterinit">afterInit()</a></li>
<li><a href="#_afterlogin">afterLogin()</a></li>
<li><a href="#_afterlogout">afterLogout()</a></li>
<li><a href="#_oninstall">onInstall()</a></li>
<li><a href="#_onsysteminstall">onSystemInstall()</a></li>
<li><a href="#_onplugininstall">onPluginInstall()</a></li>
<li><a href="#_ondevinstall">onDevInstall()</a></li>
<li><a href="#_onupdate">onUpdate()</a></li>
<li><a href="#_registerprettyprinter">registerPrettyPrinter()</a></li>
<li><a href="#_registertransformer">registerTransformer()</a></li>
<li><a href="#_registercredits">registerCredits()</a></li>
</ul>
</li>
<li><a href="#features">Features</a>
<ul class="sectlevel2">
<li><a href="#registerFeature">registerFeature()</a></li>
<li><a href="#_registeruserfeature">registerUserFeature()</a></li>
</ul>
</li>
<li><a href="#controllers">Controllers &amp; Actions</a>
<ul class="sectlevel2">
<li><a href="#_controllers_2">Controllers</a></li>
<li><a href="#_actions_2">Actions</a></li>
<li><a href="#validation">Validation</a></li>
<li><a href="#_internationalization_i18n">Internationalization (i18n)</a></li>
<li><a href="#_display">display()</a></li>
</ul>
</li>
<li><a href="#transitions">Transitions</a></li>
<li><a href="#exceptions">Exceptions</a></li>
<li><a href="#contents">Contents</a>
<ul class="sectlevel2">
<li><a href="#_contentbase">ContentBase</a></li>
<li><a href="#_contentform">ContentForm</a></li>
<li><a href="#_contentcreate">ContentCreate</a></li>
<li><a href="#_contentedit">ContentEdit</a></li>
<li><a href="#_contentlist">ContentList</a></li>
</ul>
</li>
<li><a href="#components">Components</a>
<ul class="sectlevel3">
<li><a href="#_properties">Properties</a></li>
<li><a href="#_methods">Methods</a></li>
<li><a href="#header_">Header</a></li>
<li><a href="#table">Table</a></li>
<li><a href="#table-filters">TableFilters</a></li>
<li><a href="#form">Form</a></li>
<li><a href="#form-field">FormField</a></li>
<li><a href="#button">Button</a></li>
<li><a href="#menu">Menu</a></li>
<li><a href="#link">Link</a></li>
<li><a href="#label">Label</a></li>
<li><a href="#separator">Separator</a></li>
<li><a href="#key-press">KeyPress</a></li>
</ul>
</li>
<li><a href="#controls">Controls</a>
<ul class="sectlevel2">
<li><a href="#text-field">TextField</a></li>
<li><a href="#select">Select</a></li>
<li><a href="#checkbox">Checkbox</a></li>
<li><a href="#multiple-checkbox">MultipleCheckbox</a></li>
<li><a href="#textarea">Textarea</a></li>
<li><a href="#quantity-field">QuantityField</a></li>
<li><a href="#money-field">MoneyField</a></li>
<li><a href="#number-field">NumberField</a></li>
<li><a href="#date-field">DateField</a></li>
<li><a href="#time-field">TimeField</a></li>
<li><a href="#datetime-field">DateTimeField</a></li>
<li><a href="#email-field">EmailField</a></li>
<li><a href="#telephone-field">TelephoneField</a></li>
<li><a href="#url-field">UrlField</a></li>
<li><a href="#password-field">PasswordField</a></li>
<li><a href="#hidden-field">HiddenField</a></li>
</ul>
</li>
<li><a href="#events">Events</a>
<ul class="sectlevel3">
<li><a href="#_properties_22">Properties</a></li>
</ul>
</li>
<li><a href="#pretty-printer-properties">PrettyPrinterProperties</a></li>
<li><a href="#websockets">Websockets</a></li>
<li><a href="#tenant-properties">Tenant Properties</a></li>
<li><a href="#system-properties">System Properties</a></li>
<li><a href="#custom-css">Custom CSS</a></li>
<li><a href="#custom-js">Custom JavaScript</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_quick_start">Quick Start</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_goals">Goals</h3>
<div class="paragraph">
<p><strong>With <em>Dueuno Elements</em> you can develop backoffice web applications writing code in a single programming language: <a href="https://groovy-lang.org/" target="_blank" rel="noopener">Apache Groovy</a>. No need to know HTML, CSS o Javascript.</strong></p>
</div>
<div class="paragraph">
<p>With <em>Dueuno Elements</em> you can develop and maintain web applications with requirements such as:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Authenticate &amp; authorize users (who can access and what they can do)</p>
</li>
<li>
<p>Implement several business features with a coherent user interface</p>
</li>
<li>
<p>Display and edit data in table format (CRUD)</p>
</li>
<li>
<p>Display charts, dashboards, etc. to build Business Intelligence applications</p>
</li>
<li>
<p>Let users customize their localization preferences with country specific formats (languages, dates, numbers, currencies, quantities, etc.)</p>
</li>
<li>
<p>Develop multi-device applications. Each application will automatically work on a desktop pc with a mouse as well as on a mobile device with a finger.</p>
</li>
<li>
<p>Develop multi-tenant applications. The same application can serve different clients with separate databases.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The main purpose of <em>Dueuno Elements</em> is to decouple the business logic from the <em>User Interface (GUI)</em>. This lowers the costs of maintaining the application: just one language instead of 5 (HTML, CSS, JavaScript, Java, SQL), less skilled people can join the team and no need to upgrade the GUI when new web technologies/standards gets available.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_non_goals">Non-Goals</h3>
<div class="paragraph">
<p><strong><em>Dueuno Elements</em> is NOT a solution for:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creating classical websites (text + images + basic user interaction)</p>
</li>
<li>
<p>Creating graphical/animated web applications</p>
</li>
<li>
<p>Developing applications where the client retains strict control on how the user interface will look like</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For such cases you can just use the beautiful <a href="https://grails.org/" target="_blank" rel="noopener">Grails</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_try_it_out">Try it out</h3>
<div class="paragraph">
<p>To develop <em>Dueuno Elements</em> applications you need to learn the basics of the <a href="https://groovy-lang.org/" target="_blank" rel="noopener">Apache Groovy</a> programming language and the basics of the <a href="https://grails.org/" target="_blank" rel="noopener">Grails framework</a>.</p>
</div>
<div class="sect3">
<h4 id="_learning_groovy">Learning Groovy</h4>
<div class="paragraph">
<p>The Groovy programming language has been around for more than 20 years now, it&#8217;s been the second language to be developed for the JVM. You can <a href="https://groovy-lang.org/documentation.html" target="_blank" rel="noopener">read the documentation</a> and access the <a href="https://groovy-lang.org/learn.html" target="_blank" rel="noopener">Groovy learning resources</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_learning_grails">Learning Grails</h4>
<div class="paragraph">
<p>Grails has been helping web developers for 20 years now, it still is a growing and evolving technology so what you want to do is <a href="https://grails.org/documentation.html" target="_blank" rel="noopener">reading the latest documentation on the Grails website</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_run">Run</h4>
<div class="paragraph">
<p>We are going to run our first <em>Dueuno Elements</em> application, ready?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download, install and run <a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener">IntelliJ IDEA Community Edition</a>.</p>
</li>
<li>
<p>Click on <code>File &#8594; New &#8594; Project From Version Control&#8230;&#8203;</code> and paste the following link <a href="https://github.com/dueuno-projects/dueuno-app-template" class="bare" target="_blank" rel="noopener">https://github.com/dueuno-projects/dueuno-app-template</a></p>
</li>
<li>
<p>Run the application from the Gradle sidebar (on the right) clicking on <code>Tasks &#8594; application &#8594; bootRun</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">| Running application&#8230;&#8203;

Configuring Spring Security Core &#8230;&#8203;
&#8230;&#8203; finished configuring Spring Security Core

Grails application running at <a href="https://localhost:8080" class="bare" target="_blank" rel="noopener">https://localhost:8080</a> in environment: development</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The first run will take some time since it has to download all the needed dependencies.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can now navigate to <a href="https://localhost:8080" class="bare" target="_blank" rel="noopener">https://localhost:8080</a> to see the login screen. Login with the credentials <code><strong>super/super</strong></code> to play around with the basic features of a plain Dueuno Elements application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/user-guide-login.png" alt="Application Login">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics">Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In <em>Dueuno Elements</em> everything is a component. All visual objects of the application are derived from the same base class <code>Component</code> and they can be assembled together like we do with a LEGO set.</p>
</div>
<div class="paragraph">
<p>Some of these components are automatically created and managed by the <code>org.dueuno:elements-core</code> Grails plugin for each application instance. Let&#8217;s give them a quick look.</p>
</div>
<div class="sect2">
<h3 id="_the_shell">The Shell</h3>
<div class="paragraph">
<p>The <code>Shell</code> component is the <em>Dueuno Elements</em> GUI. Each <em>Dueuno Elements</em> application share a common user experience and content structure.</p>
</div>
<div class="sect3">
<h4 id="_login">Login</h4>
<div class="paragraph">
<p>Where you can log in.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-login.png" alt="Login">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_home">Home</h4>
<div class="paragraph">
<p>Where you can find the application most relevant Features (favourits).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-home.png" alt="Groups">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_application_menu">Application Menu</h4>
<div class="paragraph">
<p>Where you can find the complete Features list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-menu.png" alt="Application Menu">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_menu">User Menu</h4>
<div class="paragraph">
<p>Where you can find the user options.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-user-menu.png" alt="User Menu">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_navigation_bar">Navigation Bar</h4>
<div class="paragraph">
<p>The user can access (from left to right) (1) the Main Menu, (2) the Home - where users can find their favourite features - and (3) the User Menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-navigation-bar.png" alt="Navigation Bar">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_content">Content</h4>
<div class="paragraph">
<p>Each Feature will display as an interactive screen into the main area surrounded by the shell. We call this area the Shell <em>Content</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-content.png" alt="Content">
</div>
</div>
<div class="paragraph">
<p>Contents can be displayed as modals. A modal content is rendered inside a dialog window. This lets the user focus on a specific part of the Feature to accomplish subtasks like editing a specific object.</p>
</div>
<div class="paragraph">
<p>Modals can be displayed in three sizes: <code>normal</code> (default), <code>wide</code> and <code>fullscreen</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-content-modal.png" alt="Modal Content">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_messages">User Messages</h4>
<div class="paragraph">
<p>The application can display messages to the user to send alerts or confirm actions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-content-message.png" alt="Message">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_responsiveness">Responsiveness</h4>
<div class="paragraph">
<p>All <em>Dueuno Elements</em> applications work both on desktop computers and on mobile devices by design and without the developer having to cope with it. Here is how an application looks like on a Desktop, on a Tablet and on a Mobile Phone.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-device-desktop.png" alt="Desktop">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-device-tablet.png" alt="Tablet">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/quick-start/basics-device-phone.png" alt="Phone" width="300">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_structure">Project Structure</h3>
<div class="paragraph">
<p><em>Dueuno Elements</em> applications are Grails applications. The project structure, follows the <em>conventions over configuration</em> design paradigm so each folder contains specific source file types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/myapp                      <i class="conum" data-value="1"></i><b>(1)</b>

  /grails-app               <i class="conum" data-value="2"></i><b>(2)</b>
    /controllers            <i class="conum" data-value="3"></i><b>(3)</b>
    /services               <i class="conum" data-value="4"></i><b>(4)</b>
    /domain                 <i class="conum" data-value="5"></i><b>(5)</b>
    /i18n                   <i class="conum" data-value="6"></i><b>(6)</b>
    /init                   <i class="conum" data-value="7"></i><b>(7)</b>
    /conf                   <i class="conum" data-value="8"></i><b>(8)</b>

  /src
    /main
      /groovy              <i class="conum" data-value="9"></i><b>(9)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Project root</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Web Application root</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>User Interface. Each class name under this directory must end with <code>Controller</code> (Eg. <code>PersonController</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Business Logic. Each class name under this directory must end with <code>Service</code> (Eg. <code>PersonService</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Database. Each class name under this directory must begin with <code>T</code> (Eg. <code>TPerson</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Translations</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Initialization</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Configuration files</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Other application source files</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each folder contains the package structure, so for example if your application main package is <code>myapp</code> the source file structure will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/myapp
  /grails-app

    /controllers
      /myapp
        MyController.groovy

    /services
      /myapp
        MyService.groovy

    /domain
      /myapp
        MyDomainClass.groovy

    /init
      /myapp
        BootStrap.groovy

  /src
    /main
      /groovy
        /myapp
          MyClass.groovy</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_features">Features</h3>
<div class="paragraph">
<p>A <em>Dueuno Elements</em> application is a container for a set of <em>Features</em>.</p>
</div>
<div class="paragraph">
<p>Each Feature consists of a set of visual objects the user can interact with to accomplish specific tasks. You can identify each Feature as an item in the application menu on the left. Clicking a menu item will display the content of the selected Feature.</p>
</div>
<div class="paragraph">
<p>To configure the application Features we register them in the <code>BootStrap.groovy</code> file.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init { <i class="conum" data-value="2"></i><b>(2)</b>
            registerFeature( <i class="conum" data-value="3"></i><b>(3)</b>
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
            )
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>ApplicationService</code> is the object in charge of the application setup</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>init = { servletContext &#8594; &#8230;&#8203; }</code> Grails closure is executed each time the application starts up</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Within the <code>applicationService.init { &#8230;&#8203; }</code> closure you can call any of the <code>applicationService</code> methods. In this case the method <code><a href="#registerFeature">registerFeature()</a></code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_controllers">Controllers</h3>
<div class="paragraph">
<p>A <em>Feature</em>, in the end, is just a link to a <em>controller</em>. A <em>controller</em> is a container for a set of <em>actions</em>.</p>
</div>
<div class="paragraph">
<p>All <em>actions</em> that a user can take on the application (eg. a click on a button) are coded as methods of a <em>controller</em> class. Each action corresponds to a URL that will be submitted from the browser to the server. The URL follows this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://my.company.com/${controllerName}/${actionName}</pre>
</div>
</div>
<div class="paragraph">
<p>For example the following Controller contains two actions that can be called like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://my.company.com/person/index <i class="conum" data-value="1"></i><b>(1)</b>
http://my.company.com/person/edit/1 <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/controllers/PersonController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    <span class="keyword">def</span> <span class="function">index</span>() { <i class="conum" data-value="1"></i><b>(1)</b>
        dispaly ...
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {  <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">def</span> id = params.id <i class="conum" data-value="3"></i><b>(3)</b>
        display ... <i class="conum" data-value="4"></i><b>(4)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>index</code> action. It&#8217;s the default one, it can also be called omitting the action name, eg. <code><a href="http://my.company.com/person" class="bare">http://my.company.com/person</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>edit</code> action, we are also passing <code>1</code> as the <code>id</code> parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>params</code> implicit variable is a <code>Map</code> containing all the submitted parameters, in this case the <code>id</code> passed by the <code>edit</code> URL</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>display</code> method ends each action and tells the browser what component to display</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_services">Services</h3>
<div class="paragraph">
<p>We don&#8217;t implement business logic in Controllers. We do it in <em>Services</em>. Each Service is a class implementing several methods we can call from a Controller.</p>
</div>
<div class="paragraph">
<p>For example the following Service implements the method <code>sayHello()</code>.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/services/PersonService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Slf4j</span>
<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">PersonService</span> {

    <span class="predefined-type">String</span> sayHello() {
        log.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Saying hello to the folks!</span><span class="delimiter">&quot;</span></span>
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi folks!</span><span class="delimiter">&quot;</span></span>
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can call it from a Controller like this:</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/controllers/PersonController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    PersonService personService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> hello = personService.sayHello()
        display <span class="key">message</span>: hello <i class="conum" data-value="2"></i><b>(2)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Service injection, the variable name must be the <code>camelCase</code> version of the <code>PascalCase</code> class name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>display</code> method renders objects on the browser, in this case a message</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_domain">Domain</h3>
<div class="paragraph">
<p>To design the database for our applications we can use <a href="https://gorm.grails.org/" target="_blank" rel="noopener">GORM, the Grails Object Relational Mapper</a>. This means we can map database tables to domain classes like this:</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/TPerson.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">TPerson</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TPerson&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname
    <span class="predefined-type">String</span> address

    <span class="directive">static</span> constraints = {
        address <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Dueuno Elements domain class names must start with <code>T</code>. This way we immediately know we are dealing with a domain class in our code.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_database_connections">Database Connections</h3>
<div class="paragraph">
<p>Each application has a <code>DEFAULT</code> database connection defined in the <code>grails-app/conf/application.yml</code> file. This <code>DEFAULT</code> connection cannot be changed at runtime and it is used by <em>Dueuno Elements</em> to store its own database.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can configure multiple databases per environment (DEV, TEST, PRODUCTION, ect) in the <code>application.yml</code>, see: <a href="https://docs.grails.org/latest/guide/single.html#environments" class="bare">https://docs.grails.org/latest/guide/single.html#environments</a></p>
</li>
<li>
<p>You can edit/create database connections at runtime from the <em>Dueuno Elements</em> GUI accessing with the <code>super</code> user from the menu <code>System Configuration &#8594; Connection Sources</code></p>
</li>
<li>
<p>You can programmatically create database connections at runtime with the <code>ConnectionSourceService</code> as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">/grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService <i class="conum" data-value="1"></i><b>(1)</b>
    ConnectionSourceService connectionSourceService <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onInstall { <span class="predefined-type">String</span> tenantId -&gt; <i class="conum" data-value="3"></i><b>(3)</b>
            connectionSourceService.create( <i class="conum" data-value="4"></i><b>(4)</b>
                    <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">runtimeDatasource</span><span class="delimiter">'</span></span>,
                    <span class="key">driverClassName</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.h2.Driver</span><span class="delimiter">'</span></span>,
                    <span class="key">dbCreate</span>: <span class="string"><span class="delimiter">'</span><span class="content">update</span><span class="delimiter">'</span></span>,
                    <span class="key">username</span>: <span class="string"><span class="delimiter">'</span><span class="content">sa</span><span class="delimiter">'</span></span>,
                    <span class="key">password</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
                    <span class="key">url</span>: <span class="string"><span class="delimiter">'</span><span class="content">jdbc:h2:mem:DYNAMIC_CONNECTION;LOCK_TIMEOUT=10000 DB_CLOSE_ON_EXIT=TRUE</span><span class="delimiter">'</span></span>,
            )
        }
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>ApplicationService</code> is the object in charge of the application setup</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>ConnectionSourceService</code> service injection</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>onInstall { &#8230;&#8203; }</code> closure is called only the first time the application runs for the DEFAULT Tenant and each time a new Tenant is created</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>create()</code> method creates a new connection and connects to it. Once created the application will automatically connect to it each time it boots up. Connection details can be changed via GUI accessing as <code>super</code> from the menu <code>System Configuration &#8594; Connection Sources</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tenants">Tenants</h3>
<div class="paragraph">
<p><em>Multi-Tenants</em> applications share the code while connecting to different databases, usually one for each different company. This way data is kept separated with no risk of disclosing data from one company to the other.</p>
</div>
<div class="paragraph">
<p>Application users can belong only to one Tenant. If a person needs to access different Tenants, then two different accounts must be created. To configure and manage users for a Tenant you have to access the application as the admin user. For each Tenant a default admin user is created with the same name as the Tenant (E.g. the Tenant called <code>TEST</code> is going to have a <code>test</code> user which is the Tenant administrator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default password for such users corresponds to their names. To change the password you need to log in with the admin user and change it from the <code>User Profile</code>. Go to <code>User Menu (top right) &#8594; Profile</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>New Tenants can be created from the <em>Dueuno Elements</em> GUI accessing as <code>super</code> from the menu <code>System Configuration &#8594; Tenants</code>. If multi-tenancy is not a requirement to your application you will be using the <code>DEFAULT</code> Tenant which is automatically created.</p>
</div>
</div>
<div class="sect2">
<h3 id="_user_management">User Management</h3>
<div class="paragraph">
<p>Users can access a <em>Dueuno Elements</em> application with credentials made of a username and a secret password. Each user must be configured by the Tenant&#8217;s <code>admin</code> user from the menu <code>System Administration &#8594; Users</code> and <code>System Administration &#8594; Groups</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/quick-start/basics-users.png" alt="Groups">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-crud">CRUD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the most useful GUI pattern is the CRUD (Create, Read, Update, and Delete). It is based on the four basic operations available to work with persistent data and databases.</p>
</div>
<div class="paragraph">
<p>Applications are made of features, we register one to work with movies (See <a href="#features">Features</a>).</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.init {
            registerFeature( <i class="conum" data-value="2"></i><b>(2)</b>
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">movie</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-film</span><span class="delimiter">'</span></span>,
                    <span class="key">favourite</span>: <span class="predefined-constant">true</span>,
            )
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#application">Application</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>See <a href="#registerFeature">registerFeature()</a></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We are going to implement a simple database with <a href="https://gorm.grails.org/" target="_blank" rel="noopener">GORM for Hibernate</a> on top of which we can build our GUI.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/domain/TMovie.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">TMovie</span> <span class="directive">implements</span> MultiTenant&lt;TMovie&gt; {

    LocalDateTime dateCreated
    <span class="predefined-type">String</span> title
    <span class="predefined-type">Integer</span> released

    <span class="directive">static</span> hasMany = [<span class="key">actors</span>: TActor]

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/domain/TActor.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">TActor</span> <span class="directive">implements</span> MultiTenant&lt;TActor&gt; {

    LocalDateTime dateCreated
    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a CRUD user interface we are going to implement a controller with the following actions. The business logic will be implemented into a service to keep it decoupled from the GUI.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Secured</span>([<span class="string"><span class="delimiter">'</span><span class="content">ROLE_CAN_EDIT_MOVIES</span><span class="delimiter">'</span></span>]) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">MovieController</span> <span class="directive">implements</span> ElementsController { <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="comment">// will display a list of movies</span>
    }

    <span class="keyword">def</span> <span class="function">create</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="comment">// will display a form with the movie title</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="comment">// will create the movie record on the database</span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="comment">// will display the details of a movie</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="comment">// will update the movie record on the database</span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="comment">// will delete a movie record from the database</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Only users with the <code>ROLE_CAN_EDIT_MOVIES</code> authority can access the actions in this controller.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implementing <code>ElementsController</code> the <em>Dueuno Elements</em> API will become available</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>As a convention, all actions building and displaying a GUI are named after a verb or a name while all actions that execute a business logic are identified by a name starting with <code>on</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We are going to use the <code>ContentList</code> content to list the records, the <code>ContentCreate</code> and <code>ContentEdit</code> contents to create a new record and edit an existing one (See <a href="#contents">Contents</a>).</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Secured</span>([<span class="string"><span class="delimiter">'</span><span class="content">ROLE_CAN_EDIT_MOVIES</span><span class="delimiter">'</span></span>])
<span class="type">class</span> <span class="class">MovieController</span> <span class="directive">implements</span> ElementsController {

    MovieService movieService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            filters.with {
                addField(
                        <span class="type">class</span>: <span class="class">TextField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                        <span class="key">label</span>: TextDefault.FIND,
                        <span class="key">cols</span>: <span class="integer">12</span>,
                )
            }
            sortable = [
                    <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
            ]
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">released</span><span class="delimiter">'</span></span>,
            ]

            body.eachRow { TableRow row, <span class="predefined-type">Map</span> values -&gt;
                <span class="comment">// Do not execute slow operations here to avoid slowing down the table rendering</span>
            }
        }

        c.table.body = movieService.list(c.table.filtersParams, c.table.fetchParams)
        c.table.paginate = movieService.count(c.table.filtersParams)

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> buildForm(TMovie obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = TMovie
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">NumberField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">released</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() {
        <span class="keyword">def</span> obj = movieService.create(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = movieService.get(params.id)
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="keyword">def</span> obj = movieService.update(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            movieService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Service injection, see the implementation below</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will implement the database operations using <a href="https://gorm.grails.org/" target="_blank" rel="noopener">GORM for Hibernate</a>, the default Object Relational Mapper used by Grails.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/services/MovieService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Slf4j</span>
<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">MovieService</span> {

    <span class="directive">private</span> DetachedCriteria&lt;TMovie&gt; buildQuery(<span class="predefined-type">Map</span> filters) {
        <span class="keyword">def</span> query = TMovie.where {}

        <span class="keyword">if</span> (filters.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)) query = query.where { id == filters.id }

        <span class="keyword">if</span> (filters.find) {
            query = query.where {
                title =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
            }
        }

        <span class="comment">// Add additional filters here</span>

        <span class="keyword">return</span> query
    }

    TMovie get(<span class="predefined-type">Serializable</span> id) {
        <span class="comment">// Add any relationships here (Eg. references to other DomainObjects or hasMany)</span>
        <span class="predefined-type">Map</span> fetch = [
                <span class="key">actors</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">return</span> buildQuery(<span class="key">id</span>: id).get(<span class="key">fetch</span>: fetch)
    }

    <span class="predefined-type">List</span>&lt;TMovie&gt; list(<span class="predefined-type">Map</span> filterParams = [:], <span class="predefined-type">Map</span> fetchParams = [:]) {
        <span class="keyword">if</span> (!params.sort) params.sort = [<span class="key">dateCreated</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>]

        <span class="comment">// Add single-sided relationships here (Eg. references to other Domain Objects)</span>
        <span class="comment">// DO NOT add hasMany relationships, you are going to have troubles with pagination</span>
<span class="comment">//        params.fetch = [</span>
<span class="comment">//                actors: 'join',</span>
<span class="comment">//        ]</span>

        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.list(fetchParams)
    }

    <span class="predefined-type">Integer</span> count(<span class="predefined-type">Map</span> filterParams = [:]) {
        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.count()
    }

    TMovie create(<span class="predefined-type">Map</span> args = [:]) {
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TMovie obj = <span class="keyword">new</span> TMovie(args)
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)

        <span class="keyword">return</span> obj
    }

    TMovie update(<span class="predefined-type">Map</span> args = [:]) {
        <span class="predefined-type">Serializable</span> id = ArgsException.requireArgument(args, <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TMovie obj = get(id)
        obj.properties = args
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)

        <span class="keyword">return</span> obj
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        TMovie obj = get(id)
        obj.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application with gradle <code>bootRun</code>, you should be able to create, list, edit and delete movies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next">What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Read the <a href="#dueuno-elements-book">Dueuno Elements Book</a> or the <a href="#api-reference">Dueuno Elements API</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="">---</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="dueuno-elements-book">The Dueuno Elements Book</h2>
<div class="sectionbody">
<div class="paragraph">
<p>My name is Gianluca Sartori, I was born in Italy. I studied <em>Computer Science</em> and started my career as a <em>Software Developer</em>, but quickly moved to <em>Project Management</em>.</p>
</div>
<div class="paragraph">
<p>In the strangest twist of events of my life, I ended up leading a team of just two people working to deliver three separate web applications at the same time. I had to <em>get my hands dirty again</em>.</p>
</div>
<div class="paragraph">
<p>After more than 15 years managing people, projects and clients, I was a developer. Again.</p>
</div>
<div class="sect2">
<h3 id="_the_90s">The 90s</h3>
<div class="paragraph">
<p>I clearly remember what it meant developing <em>Desktop Applications</em> with <em>Visual Basic</em> or <em>Borland Delphi</em>. IDEs were <em>User Interface builders</em>, not only <em>code editors</em>. <em>SQL</em> was the only way to interact with a databases. Most of the features were visually designed with <em>drag-and-drop</em>, in a kind of <em>WYSIWYG</em> manner. It was somehting a single developer could have managed.</p>
</div>
<div class="paragraph">
<p>But that was in the 90s. Fast forwarding to the present day, everyboy is developing <em>Web Applications</em>. And with good reasons.</p>
</div>
<div class="paragraph">
<p>Web applications are not installed, they are just accessed from your web browser. When you fix a bug or add a new feature to a web application, you donâ€™t need to update all the installed applications. <a href="https://www.sap.com/" target="_blank" rel="noopener">Ask SAP about this</a>.</p>
</div>
<div class="paragraph">
<p>But a web application is far more complex than a desktop one. To develop one, we need to know a couple of things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Some protocols like <em>TCP/IP</em>, <em>HTTP</em> and what a <em>Web Server</em> is;</p>
</li>
<li>
<p>Be proficient with at least five languages: <em>HTML, CSS, JavaScript</em>, a <em>Backend</em> language <em>(PHP, Java, C#, etc)</em> to write your <em>Buiness Logic</em> and <em>SQL</em> to design and query databases;</p>
</li>
<li>
<p>We need to know the <em>Business Domain</em>, the <em>Business Processes</em> and design the best <em>User Experience</em> we can;</p>
</li>
<li>
<p><em>Security</em>. The world has changed a lot from the 90s, our applications must be updated each time a breach is found on one of the software components we use. Let alone the security responsibilities we have in charge.</p>
</li>
<li>
<p>Applications today can be accessed from both a <em>Desktop PC</em> and a <em>Mobile Phone</em>. We need to make sure they work on any screen resolution <em>(Responsive User Interface)</em>;</p>
</li>
<li>
<p>Applications today must speak to the users in different languages, at least your countryâ€™s language and English. So they must be translated and we have to take care of the <em>Internationalization (i18n)</em>;</p>
</li>
<li>
<p>Since we are providing the same application to potentially hundreds of thousands users, we need to know how to deploy it in a way it can serve all of them with decent performances. This opens up a <em>Pandoraâ€™s box</em> I donâ€™t even try talking about it here (google <em>On-Premises, SaaS, IaaS, PaaS, FaaS, Edge Computing</em> and enjoy).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I am happy though that we at least survived the <em>Browsers War</em>. Today we <em>virtually</em> have one browser to develop applications for.</p>
</div>
</div>
<div class="sect2">
<h3 id="_full_stack_developers">Full-Stack Developers</h3>
<div class="paragraph">
<p>All of the above leads us to the <em>mythological figure</em> of the <em>Full-Stack Developer</em>, a <em>super hero</em> that can do all the stuff required to develop a web application.</p>
</div>
<div class="paragraph">
<p>Yes, you can find a full-stack developer in the wild. It usually is the brightest one, the one that goes <em>Burnout</em> sooner than the others. If you are a developer and you are still working helthy, you are not a full-stack developer.</p>
</div>
<div class="paragraph">
<p>In history, waves of full-stack developers had quit their jobs, ending up in some remote exotic island doing manual work and investing in their <em>Surfing Skills</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_rest_of_us">The rest of us</h3>
<div class="paragraph">
<p>We normal people avoid developing web applications as much as we can. We love <em>Web Services</em> though. <em>Same Shit, No User Interface</em>.</p>
</div>
<div class="paragraph">
<p>Because the problem is with the UI. We keep reinventing the wheel each and every time. <em>â€œHey, but each time gets better!â€</em> you would say. No. Each time gets worse.</p>
</div>
<div class="paragraph">
<p>For backoffice web applications most of the costs lies in the UI development. The <em>Front End</em>, code executed by the browser. Something invented to display text and links is nowadays used to render a GUI whose development requires us to draw lines and align pixels.</p>
</div>
<div class="paragraph">
<p>We canâ€™t just say <em>â€œHey, browser, I need a modal dialog with a title and three buttonsâ€</em>. We need to code an <em>HTML</em> page to structure the content, tell the browser how to display it with <em>CSS</em>, write <em>JavaScript</em> code so that the button <em>â€œclickâ€</em> event can send an <em>HTTP request</em> to a server that executes a <em>Java</em> function that returns a <em>JSON</em> or <em>HTML</em> we then use to update the page again with <em>JavaScript</em> code.</p>
</div>
<div class="paragraph">
<p><em>This is hell</em>. For years big companies like Google or Facebook have been trying to make it less <em>hellish</em> building frameworks to help us remain, if not healthy, at least safe.</p>
</div>
<div class="paragraph">
<p>Add to this that â€” usually, people who have no clue about what they are talking about, are in charge of giving the UI requirements.</p>
</div>
<div class="paragraph">
<p>Developers donâ€™t hesitate adding buttons everywhere with no real logical connection. Developers donâ€™t know what <em>Ergonomics</em> means and those who know, they just donâ€™t care: <em>â€œThe client wants that button? Letâ€™s giveâ€™em the fu***ng buttonâ€.</em></p>
</div>
<div class="paragraph">
<p>Developers donâ€™t like writing web applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_i_dont_like_writing_web_applications">I donâ€™t like writing web applications</h3>
<div class="ulist">
<ul>
<li>
<p>I donâ€™t like writing <em>HTML</em>.</p>
</li>
<li>
<p>I donâ€™t like writing <em>CSS</em>.</p>
</li>
<li>
<p>I donâ€™t like writing <em>JavaScript</em>.</p>
</li>
<li>
<p>I donâ€™t like building User Interfaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>But I had to.</em></p>
</div>
<div class="paragraph">
<p>So I jumped into this adventure of creating something to hide away all the <em>low level programming</em> and use just one single programming language: <a href="https://groovy-lang.org/" target="_blank" rel="noopener">Apache Groovy</a>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
I want to code the <em>â€œwhatâ€</em> and let the computer handle the <em>â€œhowâ€</em>. Cause I am not one of those folks who just like doing stuff. <em>I want stuff to be done</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, we had to build what is called a <em>Backoffice Application</em>. One of the most basic type of applications (I mean, itâ€™s not a videogame, right?) We needed to develop the <em>usual suspects</em>, something the IT world have been doing for the last 50 years:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Authenticate</em> and <em>Authorise</em> users</p>
</li>
<li>
<p>Show them a <em>Menu</em> to access the main features</p>
</li>
<li>
<p>Implement <em>CRUD Views</em></p>
</li>
<li>
<p>Implement <em>Dashboards</em></p>
</li>
<li>
<p>Other more exotic stuff, letâ€™s call it <em>Custom Views</em></p>
</li>
<li>
<p>Translate the application to English, Italian, Polish and Chinese</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dueuno_elements">Dueuno Elements</h3>
<div class="paragraph">
<p>Thatâ€™s the name of the technology weâ€™ve created.</p>
</div>
<div class="paragraph">
<p>We decided to go with Java because <em>Java is everywhere</em>. We have the most comprehensive set of libraries and frameworks, it is actively developed, mainteined and evolved, and many industries already adopted it.</p>
</div>
<div class="paragraph">
<p>So, Dueuno Elements runs on the <em>JVM</em>. It builds on top of open source technologies like the <a href="https://grails.org/" target="_blank" rel="noopener">Grails Framework (Spring)</a>, <a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> and <a href="https://jquery.com/" target="_blank" rel="noopener">jQuery</a> but lets you develop web applications with just one single programming language: the beautiful <a href="https://groovy-lang.org/" target="_blank" rel="noopener">Apache Groovy</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No need to know HTML, CSS, JavaScript or any frotend framework;</p>
</li>
<li>
<p>No need to know the screen resolution of the device your app will be consumed;</p>
</li>
<li>
<p>No need to be a super hero (A.k.a. full-stack developer), you can just be a normal person.</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
We took decisions, of course. We created our standard UI and UX. Is it perfect? No. Does it do the job. Yes. And we can only make it better from now on. At least we were able to develop our back office web applications that <a href="https://world.hey.com/dhh/the-one-person-framework-711e6318" target="_blank" rel="noopener">One-Person</a> can handle.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
BEWARE: If you like doing things, Dueuno Elements is not for you. If you like things to be done, follow me down the rabbit hole, you may find something useful.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the next chapters weâ€™ll be going through the <em>Quirks and Quarks</em> of building backoffice web applications with Dueuno Elements.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_basics">Application Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I love <em>Philosophy</em>. I could write thousands of words about Dueuno Elements but thereâ€™s another thing I love: <strong>Practice</strong>.</p>
</div>
<div class="paragraph">
<p>So letâ€™s write our first Dueuno Elements application, shall we?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are a seasoned developer, or youâ€™re in a hurry, install <a href="https://www.oracle.com/java/technologies/downloads/?er=221886#java17" target="_blank" rel="noopener">Java 17</a>, go download the <a href="https://github.com/dueuno-projects/dueuno-app-template" target="_blank" rel="noopener">Dueuno Elements Template Application</a>, run it with <code>./gradlew bootRun</code> and these are your three steps.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_grails">Grails</h3>
<div class="paragraph">
<p>Dueuno Elements is built on top of the Grails Framework. The Grails website gives us what we need to quickly start up with a <em>â€œblankâ€</em> application project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chapter-2/image-1.webp" alt="Grails Forge">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://www.oracle.com/java/technologies/downloads/?er=221886#java17" target="_blank" rel="noopener">Download and install Java 17</a></p>
</li>
<li>
<p>Go here: <a href="https://start.grails.org" target="_blank" rel="noopener">https://start.grails.org</a></p>
</li>
<li>
<p><strong>Select â€œJava 17â€ â€” SELECT JAVA 17 (We only support Grails 6.2.2 with Java 17.</strong></p>
</li>
<li>
<p>Click <em>â€œGenerate Projectâ€</em></p>
</li>
<li>
<p>Download the <em>â€œdemo.zipâ€</em> file and uncompress it on your home folder</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_dueuno_elements_2">Dueuno Elements</h3>
<div class="paragraph">
<p>Find the <em>dependencies</em> section of the <code>build.gradle</code> file and add the following line:</p>
</div>
<div class="listingblock">
<div class="title">~/demo/build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">...

dependencies {
...

    implementation <span class="string"><span class="delimiter">'</span><span class="content">org.dueuno:elements-core:{version-elements}</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the following code in <code>BootStrap.groovy</code>:</p>
</div>
<div class="listingblock">
<div class="title">~/demo/grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.core.ApplicationService</span>

<span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.init {
            <span class="comment">// It's fine to leave this empty at the moment</span>
        }
    }

    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delete <code>~/demo/grails-app/controllers/UrlMappings.groovy</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_first_execution">First Execution</h3>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The first time you run the application a lot of dependencies will be downloaded so go get something to drink or play Tetris. I love playing Tetris.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chapter-2/image-2.webp" alt="Run the application">
</div>
</div>
<div class="paragraph">
<p>Open the displayed URL: <code><a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chapter-2/image-3.webp" alt="The application running">
</div>
</div>
<div class="paragraph">
<p>With a bit of luck, at this point you should be able to see something on the screen. You can login with the following <code>username/password</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>super/super</code><br>
This is the <em>Superuser</em>, it has full power on the system. You can create new tenants, configure the system properties and monitor the whole application.</p>
</li>
<li>
<p><code>admin/admin</code><br>
This is the <em>DEFAULT Tenant Administrator</em>. It can configure the tenant properties, manage groups, users and watch audit logs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can now play around with the basics of a Dueuno Elements application. When done, we can terminate the application pressing <code>CTRL + C</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_structure">Application Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Okay, we have an empty box now. Letâ€™s fill it with some fruits (fruit is good for our health).</p>
</div>
<div class="sect2">
<h3 id="_features_2">Features</h3>
<div class="paragraph">
<p>An application is a set of <em>Features</em>. A Feature is made of a <em>Menu Item</em> â€” so that our users can access it â€” and a <em>Content</em>, a bidimensional area we can fill with buttons and stuff.</p>
</div>
<div class="paragraph">
<p>The dark area on the left is the <em>Main Menu</em>. The light area is where the <em>Content</em> is rendered.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-3/image-1.webp" alt="image 1">
</div>
</div>
<div class="paragraph">
<p>We create features in the application initialization method.</p>
</div>
<div class="listingblock">
<div class="title">~/demo/grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.core.ApplicationService</span>

<span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.init {

            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
                    <span class="key">favourite</span>: <span class="predefined-constant">true</span>,
            )

        }
    }

    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The object in charge of creating a feature, and other application-wide stuff, is the <code>ApplicationService</code>.</p>
</div>
<div class="paragraph">
<p>To register a Feature we need to specify the name of the controller that implemets the feature. Eg. in our case, the feature will be available at the following URL:</p>
</div>
<div class="paragraph">
<p><code><a href="http://localhost:8080/" class="bare">http://localhost:8080/</a><strong>person</strong></code></p>
</div>
<div class="paragraph">
<p>We can couple it with an optional icon, from the free set provided by <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a>, to decorate the Menu Item.</p>
</div>
<div class="paragraph">
<p>Last but not least, we can register the feature as a <em>favourite</em> one. Favourite features are immediately available clicking the <em>Home</em> buttom (top-left).</p>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-3/image-2.webp" alt="image 2">
</div>
</div>
<div class="paragraph">
<p><strong>Click on the feature</strong> to get a <strong>(404) Not Found!</strong> message. Thatâ€™s fine, we still havenâ€™t implemented anything.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-3/image-3.webp" alt="image 3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_and_actions">Controllers and Actions</h3>
<div class="paragraph">
<p>Look at the URL. It says:</p>
</div>
<div class="paragraph">
<p><code><a href="http://localhost:8080/" class="bare">http://localhost:8080/</a><strong>person/index</strong></code></p>
</div>
<div class="paragraph">
<p>We have three things here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><strong><a href="http://localhost:8080" class="bare">http://localhost:8080</a></strong></code><br>
This is the address and port where we can find our application.</p>
</li>
<li>
<p><code><strong>person</strong></code><br>
This is the <strong>Controller</strong> name. A Controller is just a container. It contains Actions.</p>
</li>
<li>
<p><code><strong>index</strong></code><br>
This is an <strong>Action</strong> name. An Action is a piece of code that implements some logic.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Even if a Feature is accessed from a specific URL (<code>controller/action</code> pair), a <em>Feature</em> may be composed by more than one <em>Controller</em> and many, manyâ€¦ many <em>Actions</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Controllers</strong> are Groovy classes located under the folder: <code>~/demo/grails-app/controllers/</code></p>
</li>
<li>
<p><strong>Actions</strong> are methods of a <em>Controller</em> class.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_controller_structure">Controller Structure</h3>
<div class="paragraph">
<p>Itâ€™s time to feed our newborn creature. We are going to implement a CRUD view, writing the <code>PersonController</code>, with different actions in order to display a list of people and give the user the ability to <em>create</em>, <em>edit</em> and <em>delete</em> one or more persons.</p>
</div>
<div class="paragraph">
<p>We create a skeleton first, a controller with just the action firms, so we can focus on the structure.</p>
</div>
<div class="listingblock">
<div class="title">Create a new file <code>~/demo/grails-app/controllers/com/example/PersonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">grails.validation.Validateable</span>

<span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="comment">// Displays a list of people</span>
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="comment">// Displays a form to input person data</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>(PersonValidator val) {
        <span class="comment">// Creates a new person</span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="comment">// Displays a form to edit person data</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>(PersonValidator val) {
        <span class="comment">// Updates a person record</span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="comment">// Deletes a person</span>
    }
}

<span class="type">class</span> <span class="class">PersonValidator</span> <span class="directive">implements</span> Validateable {
    <span class="comment">// Will validate user input</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please focus your attention to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The controller class name must be suffixed by the word <code>Controller</code>. Thatâ€™s why our person controller is called <code>PersonController</code> (this is a convention of the Grails Framework).</p>
</li>
<li>
<p>The person controller implements <code>ElementsController</code>. This makes the <a href="https://www.dueuno.com/docs/" target="_blank" rel="noopener">Dueuno Elements API</a> available to our actions (NOTE: If you use <a href="https://www.jetbrains.com/idea/download/" target="_blank" rel="noopener">IntelliJ IDEA Ultimate</a> with the <a href="https://plugins.jetbrains.com/plugin/18504-grails" target="_blank" rel="noopener">Grails plugin</a> you can avoid implementing <code>ElementsController</code> and everything will magically work as expected. Yay!).</p>
</li>
<li>
<p>We use a convention to name the actions. When they start with the <code>on</code> prefix, they execute some logic in the background. When they donâ€™t, they render a user interface. We are also using a naming standard here, we may change the action names, but for now letâ€™s not add too much complications.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_controller_implementation">Controller Implementation</h3>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/controllers/com/example/PersonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.contents.*</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.*</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">grails.validation.Validateable</span>

<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>

<span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">List</span> personRegistry = [
            [<span class="key">id</span>: <span class="integer">1</span>, <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Gianluca</span><span class="delimiter">'</span></span>, <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Sartori</span><span class="delimiter">'</span></span>, <span class="key">birthdate</span>: LocalDate.of(<span class="integer">1979</span>, <span class="integer">6</span>, <span class="integer">24</span>)],
            [<span class="key">id</span>: <span class="integer">2</span>, <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">John Luke</span><span class="delimiter">'</span></span>, <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Taylor</span><span class="delimiter">'</span></span>, <span class="key">birthdate</span>: LocalDate.of(<span class="integer">1921</span>, <span class="integer">6</span>, <span class="integer">24</span>)],
            [<span class="key">id</span>: <span class="integer">3</span>, <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Juan Lucas</span><span class="delimiter">'</span></span>, <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Sastre</span><span class="delimiter">'</span></span>, <span class="key">birthdate</span>: LocalDate.of(<span class="integer">1942</span>, <span class="integer">6</span>, <span class="integer">24</span>)],
    ]

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
            ]
        }

        c.table.body = personRegistry
        c.table.paginate = personRegistry.size()

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> ContentForm buildForm(<span class="predefined-type">Map</span> obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = PersonValidator
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">DateField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>(PersonValidator val) {
        <span class="keyword">if</span> (val.hasErrors()) {
            display <span class="key">errors</span>: val
            <span class="keyword">return</span>
        }

        <span class="keyword">def</span> last = personRegistry.max { <span class="local-variable">it</span>.id }
        personRegistry &lt;&lt; [
                <span class="key">id</span>: last ? last.id + <span class="integer">1</span> : <span class="integer">1</span>,
                <span class="key">firstname</span>: params.firstname,
                <span class="key">lastname</span>: params.lastname,
                <span class="key">birthdate</span>: params.birthdate,
        ]

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = personRegistry.find { <span class="local-variable">it</span>.id == params.id }
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>(PersonValidator val) {
        <span class="keyword">if</span> (val.hasErrors()) {
            display <span class="key">errors</span>: val
            <span class="keyword">return</span>
        }

        <span class="keyword">def</span> obj = personRegistry.find { <span class="local-variable">it</span>.id == params.id }
        obj.firstname = params.firstname
        obj.lastname = params.lastname
        obj.birthdate = params.birthdate

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            personRegistry.removeIf { <span class="local-variable">it</span>.id == params.id }
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}

<span class="type">class</span> <span class="class">PersonValidator</span> <span class="directive">implements</span> Validateable {
    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname
    LocalDate birthdate
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thereâ€™s a lot of stuff here. The most important things now are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Contents.</strong> A Content is the canvas on which we design the UI. To do it we add <code>Components</code> and <code>Controls</code>. You canâ€™t see it in the example because we are using preconfigured contents for tables (<code>ContentList</code>) and forms (<code>ContentCreate</code> &amp; <code>ContentEdit</code>)</p>
</li>
<li>
<p><strong>The <code>display()</code> method.</strong> Each action terminates its execution with the <code>display()</code> method. This is the way we display the UI or route from one action to the other.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For the sake of the demo weâ€™ve implemented the Business Logic within the controller class. This is not something we do. Donâ€™t do it. Ever. Donâ€™t.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/T9UVU0LXJfc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>In the next chapter we are going to see how and where to implement the <em>Business Logic</em> adding a database to this <em>Supa-Dupa-Cool-And-Fool</em> application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_project_setup">Project Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we get into the topic of adding <em>Business Logic</em> to our UI, there are some twirls Iâ€™d like to address.</p>
</div>
<div class="sect2">
<h3 id="_spring_dev_tools">Spring Dev Tools</h3>
<div class="paragraph">
<p>We donâ€™t like executing <code>./gradlew bootRun</code> each time we need to launch the application.</p>
</div>
<div class="paragraph">
<p>We prefer to just <em>save</em> our code and let the system automatically take care of the compilation and application restart so we can just refresh the browser and test our code.</p>
</div>
<div class="paragraph">
<p>To achieve this we need to add the <a href="https://docs.spring.io/spring-boot/reference/using/devtools.html" target="_blank" rel="noopener">Spring Dev Tools</a> to our project along with some configuration.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/build.gradle</code> and add the following dependency:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    ...
    developmentOnly <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-devtools</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit <code>~/demo/grails-app/conf/application.yml</code> and add the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">spring</span>:
  <span class="key">main</span>:
    <span class="key">banner-mode</span>: <span class="string"><span class="content">'log'</span></span>
  <span class="key">devtools</span>:
    <span class="key">restart</span>:
      <span class="key">additional-exclude</span>:
        - <span class="string"><span class="content">'*.gsp'</span></span>
        - <span class="string"><span class="content">'**/*.gsp'</span></span>
        - <span class="string"><span class="content">'*.gson'</span></span>
        - <span class="string"><span class="content">'**/*.gson'</span></span>
        - <span class="string"><span class="content">'logback.groovy'</span></span>
        - <span class="string"><span class="content">'*.properties'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From now on when you make a change to one of the application classes it will be automatically reflected in the application.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The application restart is not immediate, it will take some seconds.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_logging">Logging</h3>
<div class="paragraph">
<p>Logs are important. We want to configure them so we can have logs in our terminal while developing the application. At the same time we want them to be written on a file and archived when they reach a certain size so the disk of our server wonâ€™t get filled up.</p>
</div>
<div class="paragraph">
<p>The following is a default configuration that may make sense in many production environments, but not in all of them.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The following configuration is not a <em>silver bullet</em>. Please take a look at the <a href="https://logback.qos.ch/manual/configuration.html" target="_blank" rel="noopener">Logback documentation</a> to configure logging to fit your needs.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/conf/logback.xml</code> and copy the following:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;configuration&gt;</span>

    <span class="tag">&lt;conversionRule</span> <span class="attribute-name">conversionWord</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">highlightLogLevel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">converterClass</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dueuno.commons.logs.HighlightLogLevel</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

    <span class="tag">&lt;appender</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STDOUT</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ch.qos.logback.core.ConsoleAppender</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;encoder&gt;</span>
            <span class="tag">&lt;pattern&gt;</span>%d{HH:mm:ss.SSS} %highlightLogLevel(%-5level) [%thread] %-40.40logger{36} : %highlightLogLevel(%msg%n)<span class="tag">&lt;/pattern&gt;</span>
        <span class="tag">&lt;/encoder&gt;</span>
    <span class="tag">&lt;/appender&gt;</span>

    <span class="tag">&lt;property</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application.yml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;appender</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FILE</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ch.qos.logback.core.rolling.RollingFileAppender</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;file&gt;</span>${info.app.name}/logs/${info.app.name}.log<span class="tag">&lt;/file&gt;</span>

        <span class="tag">&lt;rollingPolicy</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;fileNamePattern&gt;</span>${info.app.name}/logs/archive/${info.app.name}.%d{yyyy-MM-dd}.%i.log.zip<span class="tag">&lt;/fileNamePattern&gt;</span>
            <span class="tag">&lt;cleanHistoryOnStart&gt;</span>true<span class="tag">&lt;/cleanHistoryOnStart&gt;</span>
            <span class="tag">&lt;maxHistory&gt;</span>10<span class="tag">&lt;/maxHistory&gt;</span>
            <span class="tag">&lt;maxFileSize&gt;</span>10MB<span class="tag">&lt;/maxFileSize&gt;</span>
            <span class="tag">&lt;totalSizeCap&gt;</span>100GB<span class="tag">&lt;/totalSizeCap&gt;</span>
        <span class="tag">&lt;/rollingPolicy&gt;</span>

        <span class="tag">&lt;encoder&gt;</span>
            <span class="tag">&lt;pattern&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %-40.40logger{36} : %msg%n<span class="tag">&lt;/pattern&gt;</span>
        <span class="tag">&lt;/encoder&gt;</span>
    <span class="tag">&lt;/appender&gt;</span>

    <span class="tag">&lt;root</span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ERROR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;appender-ref</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STDOUT</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;appender-ref</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FILE</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/root&gt;</span>

    <span class="tag">&lt;logger</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.boot.SpringApplication</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;logger</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dueuno</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;logger</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">demo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DEBUG</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

<span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>From now on, when you run the application you should see something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">10:53:29.113 INFO  [restartedMain] o.s.boot.SpringApplication               :
&gt;                                                                            &lt;
&gt;                         _                                                  &lt;
&gt;                        | |  ELEMENTS                                       &lt;
&gt;                      __| |_   _  ___ _   _ _ __   ___                      &lt;
&gt;                     / _` | | | |/ _ \ | | | '_ \ / _ \                     &lt;
&gt;                    | (_| | |_| |  __/ |_| | | | | (_) |                    &lt;
&gt;                     \__,_|\__,_|\___|\__,_|_| |_|\___/                     &lt;
&gt;                         2024 (c) https://dueuno.com                        &lt;
&gt;                                                                            &lt;
&gt;                                                                            &lt;


Configuring Spring Security Core ...
... finished configuring Spring Security Core

10:53:31.227 INFO  [restartedMain] d.e.core.ConnectionSourceService         : Installed datasource connection 'DEFAULT: jdbc:h2:mem:devDb;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE'
10:53:31.265 INFO  [restartedMain] d.elements.tenants.TenantService         : Creating new tenant 'DEFAULT'...
10:53:31.300 INFO  [restartedMain] d.elements.security.SecurityService      : Created authority 'ROLE_SECURITY'
10:53:31.306 INFO  [restartedMain] d.elements.security.SecurityService      : Created authority 'ROLE_USER'
10:53:31.308 INFO  [restartedMain] d.elements.security.SecurityService      : DEFAULT: Created group 'USERS' with authorities: [ROLE_USER]
10:53:31.313 INFO  [restartedMain] d.elements.security.SecurityService      : Created authority 'ROLE_ADMIN'
10:53:31.314 INFO  [restartedMain] d.elements.security.SecurityService      : DEFAULT: Created group 'ADMINS' with authorities: [ROLE_ADMIN]
10:53:31.318 INFO  [restartedMain] d.elements.security.SecurityService      : Created authority 'ROLE_SUPERADMIN'
10:53:31.319 INFO  [restartedMain] d.elements.security.SecurityService      : DEFAULT: Created group 'SUPERADMINS' with authorities: [ROLE_SUPERADMIN]
10:53:31.417 INFO  [restartedMain] d.elements.security.SecurityService      : DEFAULT: Created user 'super' in groups: [SUPERADMINS, USERS]
10:53:31.511 INFO  [restartedMain] d.elements.security.SecurityService      : DEFAULT: Created user 'admin' in groups: [USERS, ADMINS]
10:53:31.528 INFO  [restartedMain] d.elements.tenants.TenantService         : --------------------------------------------------------------------------------
10:53:31.528 INFO  [restartedMain] d.elements.tenants.TenantService         : DEFAULT: INSTALLING PLUGINS...
10:53:31.528 INFO  [restartedMain] d.elements.tenants.TenantService         : --------------------------------------------------------------------------------
10:53:31.529 INFO  [restartedMain] d.elements.core.ApplicationService       : DEFAULT: Executing 'dueuno.elements.core.onPluginInstall'...
10:53:31.532 INFO  [restartedMain] d.elements.core.ApplicationService       : ...done.
10:53:31.532 INFO  [restartedMain] d.elements.core.ApplicationService       :
10:53:31.544 INFO  [restartedMain] d.elements.core.ApplicationService       : Available languages [cs, da, de, en, es, fr, it, ja, nb, nl, pl, pt_br, pt_pt, ru, sk, sv, th, zh_cn]
10:53:31.544 INFO  [restartedMain] d.elements.core.ApplicationService       :
10:53:31.544 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
10:53:31.544 INFO  [restartedMain] d.elements.core.ApplicationService       : APPLICATION: STARTING UP...
10:53:31.544 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
10:53:31.545 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'dueuno.elements.core.beforeInit'...
10:53:31.586 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'com.example.init'...
10:53:31.586 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'dueuno.elements.core.afterInit'...
10:53:31.592 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
10:53:31.592 INFO  [restartedMain] d.elements.core.ApplicationService       : APPLICATION: STARTED.
10:53:31.593 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
10:53:31.593 INFO  [restartedMain] d.elements.core.ApplicationService       :
Grails application running at http://localhost:8080 in environment: development</code></pre>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-4/image-1.webp" alt="image 1">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_git">Git</h3>
<div class="paragraph">
<p>Dueuno Elements applications will create a working directory when they first start. It is good practice not to share its content in the <em>Git repository</em>. Also, itâ€™s good practice not to share the IDEâ€™s own project configuration since that is handled by Gradle.</p>
</div>
<div class="paragraph">
<p>The following configuration can help keeping your <em>Git repository</em> clean.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/.gitignore</code> and copy the following:</div>
<div class="content">
<pre class="CodeRay highlight"><code>HELP.md
.gradle
build/
!gradle/wrapper/gradle-wrapper.jar
!**/src/main/**/build/
!**/src/test/**/build/

### STS ###
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache
bin/
!**/src/main/**/bin/
!**/src/test/**/bin/

### IntelliJ IDEA ###
.idea
*.iws
*.iml
*.ipr
out/
!**/src/main/**/out/
!**/src/test/**/out/

### NetBeans ###
/nbproject/private/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/

### VS Code ###
.vscode/

### Set the following to the application name
/demo/</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is it. We are now ready to move on implementing the <em>Business Logic</em> on a real <em>Database</em>. Are you ready?</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_first_real_application">First Real Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we are going to finish our first Dueuno Elements application.</p>
</div>
<div class="sect2">
<h3 id="_database_setup">Database Setup</h3>
<div class="paragraph">
<p>We need a real database to store our people data. For the sake of this demo application we are going to just configure an <a href="https://www.h2database.com/html/main.html" target="_blank" rel="noopener">H2 database</a> to persist our data in a file.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/conf/application.yml</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">dataSource</span>:
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:h2:file:./demo/demo;LOCK_TIMEOUT=10000;DB_CLOSE_ON_EXIT=FALSE</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For this demo we are going to use <a href="https://gorm.grails.org/" target="_blank" rel="noopener">GORM</a>, the Object Relational Mapper provided by the Grails Framework, so we need to create a domain class. GORM will map this class to a table in the generated database schema. Querying this class with the GORM API will give us access to the data we are storing.</p>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/domain/com/example/TPerson.groovy</code> and copy the following code:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">grails.gorm.MultiTenant</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>

<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDateTime</span>

<span class="type">class</span> <span class="class">TPerson</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TPerson&gt; {
    LocalDateTime dateCreated

    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname
    LocalDate birthdate

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A couple of things to note:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The class name starts with <code>T</code>. This is a Dueuno Elements convention to let us immediately realize when we are working on a domain object. <code>T</code> stands for <em>Table (I know, itâ€™s such an original decision).</em></p>
</li>
<li>
<p>The class <code>implements GormEntity, MultiTenant&lt;TPerson&gt;</code>. This means the domain object will be replicated in every new tenant created after the application gets deployed. The <code>GormEntity</code> is technically optional, we can omit it, but this way we gain a minimum of support from common IDEs with no need for the Grails Plugin (available only for IntelliJ IDEA).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We are going to mock-up some data to help us with the development of the application. We do it in the <code>onDevInstall</code> method since it will only get executed while developing the application. It will not be executed when running the application in the production environment.</p>
</div>
<div class="paragraph">
<p>The <em>mock-up</em> code uses the <code>PersonService</code> we are going to create in a minute.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/init/com/example/BootStrap.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.core.ApplicationService</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>

<span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService
    PersonService personService

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.onDevInstall { <span class="predefined-type">String</span> tenantId -&gt;
            personService.create(
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Felicity</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Green</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">1</span>, <span class="integer">2</span>),
            )
            personService.create(
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Grace</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Blue</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">2</span>, <span class="integer">1</span>),
            )
            personService.create(
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Joy</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Red</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">12</span>, <span class="integer">21</span>),
            )
        }

        applicationService.init {
            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
                    <span class="key">favourite</span>: <span class="predefined-constant">true</span>,
            )
        }
    }

    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>GORM will generate a database table for us. Letâ€™s see:</p>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="paragraph">
<p>Login as Superuser (<code>super/super</code>).</p>
</div>
<div class="paragraph">
<p>Click on â€œ<strong>Connection Sources</strong>â€ in the Main Menu <em>(on the left)</em> and copy the connection URL:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-5/image-1.webp" alt="image 1">
</div>
</div>
<div class="paragraph">
<p>Click on the User Menu (top-right) and select "<strong>[DEV] H2 Console</strong>":</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-5/image-2.webp" alt="image 2">
</div>
</div>
<div class="paragraph">
<p>Copy the URL and click â€œ<strong>Connect</strong>â€. You should see the <code>T_PERSON</code> table:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-5/image-3.webp" alt="image 3">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-5/image-4.webp" alt="image 4">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Table names starts with <code>T_</code> to avoid conflicting with database keywords or other existent table names. Yes, it happens. Yes, there are common theoretical and technical ways to handle such cases, but they all give responsibility to the developer. Yes, we donÂ´t want that responsibility to be on the developer hands.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_business_logic">Business Logic</h3>
<div class="paragraph">
<p>We donâ€™t like writing the <em>Business Logic</em> in controllers. It is an <em>anti-pattern</em>. Dueuno Elements uses controllers as a way to implement the <em>User Interface</em>.</p>
</div>
<div class="paragraph">
<p>Fortunately the Grails Framework comes into rescue giving us a convention to implement our logic. We just need to implement a <strong>Service</strong>.</p>
</div>
<div class="paragraph">
<p>Services are classes located into the <code>/grails-app/services</code> folder whose name is suffixed by <code>Service</code>. So we just need to create our <code>PersonService</code> class.</p>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/services/com/example/PersonService.groovy</code> and copy the code below.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.exceptions.ArgsException</span>
<span class="keyword">import</span> <span class="include">grails.gorm.DetachedCriteria</span>
<span class="keyword">import</span> <span class="include">grails.gorm.multitenancy.CurrentTenant</span>
<span class="keyword">import</span> <span class="include">javax.annotation.PostConstruct</span>

<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">PersonService</span> {

    <span class="annotation">@PostConstruct</span>
    <span class="type">void</span> init() {
        <span class="comment">// Executes only once when the application starts</span>
    }

    <span class="directive">private</span> DetachedCriteria&lt;TPerson&gt; buildQuery(<span class="predefined-type">Map</span> filterParams) {
        <span class="keyword">def</span> query = TPerson.where {}

        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)) query = query.where { id == filterParams.id }
        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>)) query = query.where { birthdate == filterParams.birthdate }

        <span class="keyword">if</span> (filterParams.find) {
            <span class="predefined-type">String</span> search = filterParams.find.replaceAll(<span class="string"><span class="delimiter">'</span><span class="char">\\</span><span class="content">*</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)
            query = query.where { <span class="integer">1</span> == <span class="integer">1</span>
                || firstname =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
                || lastname =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
            }
        }

        <span class="comment">// Add additional filters here</span>

        <span class="keyword">return</span> query
    }

    TPerson get(<span class="predefined-type">Serializable</span> id) {
        <span class="comment">// Add any relationships here (Eg. references to other DomainObjects or hasMany)</span>
        <span class="predefined-type">Map</span> fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">return</span> buildQuery(<span class="key">id</span>: id).get(<span class="key">fetch</span>: fetch)
    }

    <span class="predefined-type">List</span>&lt;TPerson&gt; list(<span class="predefined-type">Map</span> filterParams = [:], <span class="predefined-type">Map</span> fetchParams = [:]) {
        <span class="keyword">if</span> (!fetchParams.sort) fetchParams.sort = [<span class="key">dateCreated</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>]

        <span class="comment">// Add single-sided relationships here (Eg. references to other DomainObjects)</span>
        <span class="comment">// DO NOT add hasMany relationships, you are going to have troubles with pagination</span>
        fetchParams.fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.list(fetchParams)
    }

    <span class="predefined-type">Integer</span> count(<span class="predefined-type">Map</span> filterParams = [:]) {
        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.count()
    }

    TPerson create(<span class="predefined-type">Map</span> args = [:]) {
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TPerson obj = <span class="keyword">new</span> TPerson(args)
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    TPerson update(<span class="predefined-type">Map</span> args = [:]) {
        <span class="predefined-type">Serializable</span> id = ArgsException.requireArgument(args, <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TPerson obj = get(id)
        obj.properties = args
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        TPerson obj = get(id)
        obj.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see we have implemented the methods we need to create a CRUD:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get()</code> returns a single record by its ID</p>
</li>
<li>
<p><code>list()</code> returns a set of records accepting some <em>filters</em> and some <em>fetch parameters</em> to control sorting and pagination</p>
</li>
<li>
<p><code>count()</code> returns the number of records depending on the used <em>filters</em></p>
</li>
<li>
<p><code>create()</code> inserts a new record in the database</p>
</li>
<li>
<p><code>update()</code> updates and existing record in the database</p>
</li>
<li>
<p><code>delete()</code> deletes a single record by its ID</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this case we are using GORM, the Object Relational Mapper provided by the Grails Framework, but we could have implemented our service in any other way. Plain <em>SQL</em> or <em>Web Services</em> calls would have been fine.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
As long as the methods return <em>Objects</em>, <em>List of Objects</em> or <em>List of Maps</em> we are fine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, letâ€™s put this all together.</p>
</div>
</div>
<div class="sect2">
<h3 id="_user_interface">User Interface</h3>
<div class="paragraph">
<p>We already have our <code>PersonController</code>, we just need to adapt it so it can use the new <code>PersonService</code>.</p>
</div>
<div class="paragraph">
<p>We are also adding some filters and sorting so the final user can search by name and birth date.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/controllers/com/example/PersonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.contents.*</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.*</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">grails.validation.Validateable</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>

<span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    PersonService personService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            filters.with {
                addField(
                        <span class="type">class</span>: <span class="class">DateField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                        <span class="key">cols</span>: <span class="integer">3</span>,
                )
                addField(
                        <span class="type">class</span>: <span class="class">TextField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                        <span class="key">cols</span>: <span class="integer">9</span>,
                )
            }
            sortable = [
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
            ]
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
            ]
        }

        c.table.body = personService.list(c.table.filterParams, c.table.fetchParams)
        c.table.paginate = personService.count(c.table.filterParams)

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> ContentForm buildForm(TPerson obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = TPerson
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">DateField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() {
        <span class="keyword">def</span> obj = personService.create(params)

        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = personService.get(params.id)
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="keyword">def</span> obj = personService.update(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            personService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To finish the UI we implement the <em>English</em> and <em>Italian</em> translations deleting all the others.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails/app/i18n/messages.properties</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">app.name=People Registry

shell.person=People
shell.person.help=Manage the People Registry

person.index.header.title=People
person.create.header.title=New Person
person.edit.header.title=Person
person.filters.birthdate=Birthdate
person.filters.find=Find
person.firstname=Firstname
person.lastname=Lastname
person.birthdate=Birth Date</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails/app/i18n/messages_it.properties</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">app.name=Registro persone

shell.person=Persone
shell.person.help=Gestisci il registro persone

person.index.header.title=Persone
person.create.header.title=Nuova persona
person.edit.header.title=Persona
person.filters.birthdate=Nato il
person.filters.find=Trova
person.firstname=Nome
person.lastname=Cognome
person.birthdate=Nato il</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delete all the others <code>.properties</code> files in <code>~/demo/grails-app/i18n/</code></p>
</div>
<div class="paragraph">
<p>Now, with a bit of luck, we should be able to run our first complete Dueuno Elements application:</p>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/lB12PqKSRXw?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>This chapter closes the first round on the Dueuno Elements basics.</p>
</div>
<div class="paragraph">
<p>In the next chapter we are going to explore the Tenant Properties to configure the application to reflect our customerâ€™s brand.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_branding">Application Branding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Companies invest in <em>Brand Identity</em>. They also invest in <em>Employer Branding</em>, which basically means <em>selling</em> your brand to your employees. This is not just a single activity, but you can bet your client is going to ask you to have their logo on the application their employees use daily.</p>
</div>
<div class="sect2">
<h3 id="_logo">Logo</h3>
<div class="paragraph">
<p>Every company has a logo. For the sake of this demo application we are asking Google to give us one.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-1.webp" alt="image 1">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It must be a <code>.png</code> image so we can have <em>transparency</em>. We donâ€™t accept any other format.
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-2.webp" alt="image 2">
</div>
</div>
<div class="paragraph">
<p>We also need a background for the login screen. Letâ€™s ask Google this one too.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-3.webp" alt="image 3">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It must be a <code>.jpg</code> image
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-4.webp" alt="image 4">
</div>
</div>
<div class="listingblock">
<div class="title">Create the folder <code>~/demo/src/main/resources/deploy/public/brand</code> then copy and rename the files we just downloaded. The <code>logo.png</code> file can be duplicated to create the other <code>.png</code> files.</div>
<div class="content">
<pre class="CodeRay highlight"><code>/demo/src/main/resources/deploy/public/brand
 - login-logo.png
 - login-background.jpg
 - logo.png
 - favicon.png
 - appicon.png</code></pre>
</div>
</div>
<div class="paragraph">
<p>From now on, each time we deploy the application for the first time, those files will be extracted and added into the following folder: <code>~/demo/demo/tenants/DEFAULT/public/brand</code></p>
</div>
<div class="paragraph">
<p>To see the results of our effort we need to remove the default branding already installed under the <code>~/demo/demo</code> folder.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Delete the <code>~/demo/demo</code> folder
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should see something like this. It looks cool but&#8230;&#8203; we need to fix the colors.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-5.webp" alt="image 5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_colors">Colors</h3>
<div class="paragraph">
<p>Dueuno Elements applications can be configured from the <em>Tenant Properties</em> <em>(System Administration &#8594; Settings)</em>. That means each tenant can have a different setup.</p>
</div>
<div class="paragraph">
<p>Login as <code>admin/admin</code>, click on <em>â€œSystem Administration &#8594; Settingsâ€</em> on the Main Menu <em>(on the left)</em> and search for â€œcolorâ€.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-6.webp" alt="image 6">
</div>
</div>
<div class="paragraph">
<p>Each Dueuno Elements application can be configured with three different colors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PRIMARY</code><br>
The color used for primary actions. Primary actions are main buttons, buttons that â€œcreateâ€ stuff or buttons that we want the user to see as different from the others because they do something relevant in the context they are displayed.</p>
</li>
<li>
<p><code>SECONDARY</code><br>
Itâ€™s the color used for all the other buttons, those buttons that do normal stuff.</p>
</li>
<li>
<p><code>TERTIARY</code><br>
Itâ€™s the color used for the Content and the Form Fields.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each color has three values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BACKGROUND_COLOR</code><br>
The color used for the background of the element.</p>
</li>
<li>
<p><code>BACKGROUND_COLOR_ALPHA</code><br>
The index of transparency. This is used to shade the primary color when its flat version is not appropriate.</p>
</li>
<li>
<p><code>TEXT_COLOR</code><br>
The color used for texts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure the main colors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>PRIMARY_BACKGROUND_COLOR</code> to <code>#018B84</code></p>
</li>
<li>
<p>Set the <code>PRIMARY_BACKGROUND_COLOR_ALPHA</code> to <code>0.25</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Logout and login again
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The application should now look like this:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-7.webp" alt="image 7">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-8.webp" alt="image 8">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-9.webp" alt="image 9">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-10.webp" alt="image 10">
</div>
</div>
<div class="paragraph">
<p>Since we donâ€™t want to manually set the colors every time we install the application, we can use the <code>onInstall</code> method to set the <em>Tenant Properties</em> like the follow.</p>
</div>
<div class="paragraph">
<p>We are also adding some copy under the login form with a link to our website to let the users know who we are.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/init/BootStrap.groovy</code> adding the following lines:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService
    TenantPropertyService tenantPropertyService

    ...

    def init = { servletContext -&gt;

        applicationService.onInstall { <span class="predefined-type">String</span> tenantId -&gt;
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">PRIMARY_BACKGROUND_COLOR</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">#018B84</span><span class="delimiter">'</span></span>)
            tenantPropertyService.setNumber(<span class="string"><span class="delimiter">'</span><span class="content">PRIMARY_BACKGROUND_COLOR_ALPHA</span><span class="delimiter">'</span></span>, <span class="float">0.25</span>)
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">LOGIN_COPY</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">2024 &amp;copy; &lt;a href=&quot;https://my-company.com&quot; target=&quot;_blank&quot;&gt;My Company&lt;/a&gt;&lt;br/&gt;Made in Italy</span><span class="delimiter">'</span></span>)
        }

    ...

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_logs">Logs</h3>
<div class="paragraph">
<p>We want everybody, not just the end users, be aware of the brand! Thatâ€™s why we want to add a banner to our logs.</p>
</div>
<div class="paragraph">
<p>This way, every time the application is restarted, we will see an <em>ASCII Art</em> representation of our company name. You can spend hours creating the perfect ASCII Art. I am lazy and will use an <em>ASCII Text generator</em> I found here: <a href="https://patorjk.com/software/taag" target="_blank" rel="noopener">https://patorjk.com/software/taag</a></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-6/image-11.webp" alt="image 11">
</div>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/src/resources/banner.txt</code> and copy the generated text leaving a blank line on the top</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console"> __  __          ____
|  \/  |_   _   / ___|___  _ __ ___  _ __   __ _ _ __  _   _
| |\/| | | | | | |   / _ \| '_ ` _ \| '_ \ / _` | '_ \| | | |
| |  | | |_| | | |__| (_) | | | | | | |_) | (_| | | | | |_| |
|_|  |_|\__, |  \____\___/|_| |_| |_| .__/ \__,_|_| |_|\__, |
        |___/                       |_|                |___/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">18:47:30.769 INFO  [restartedMain] o.s.boot.SpringApplication               :
 __  __          ____
|  \/  |_   _   / ___|___  _ __ ___  _ __   __ _ _ __  _   _
| |\/| | | | | | |   / _ \| '_ ` _ \| '_ \ / _` | '_ \| | | |
| |  | | |_| | | |__| (_) | | | | | | |_) | (_| | | | | |_| |
|_|  |_|\__, |  \____\___/|_| |_| |_| .__/ \__,_|_| |_|\__, |
        |___/                       |_|                |___/


Configuring Spring Security Core ...
... finished configuring Spring Security Core

18:47:36.979 INFO  [restartedMain] d.elements.core.ApplicationService       : Available languages [en, it]
18:47:36.982 INFO  [restartedMain] d.elements.core.ApplicationService       :
18:47:36.982 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
18:47:36.982 INFO  [restartedMain] d.elements.core.ApplicationService       : APPLICATION: STARTING UP...
18:47:36.982 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
18:47:36.987 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'dueuno.elements.core.beforeInit'...
18:47:37.029 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'com.example.init'...
18:47:37.030 INFO  [restartedMain] d.elements.core.ApplicationService       : Executing 'dueuno.elements.core.afterInit'...
18:47:37.042 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
18:47:37.042 INFO  [restartedMain] d.elements.core.ApplicationService       : APPLICATION: STARTED.
18:47:37.042 INFO  [restartedMain] d.elements.core.ApplicationService       : --------------------------------------------------------------------------------
18:47:37.042 INFO  [restartedMain] d.elements.core.ApplicationService       :
Grails application running at http://localhost:8080 in environment: development</code></pre>
</div>
</div>
<div class="paragraph">
<p>We made our client happy. That means we are happy too. Do we need anything more?</p>
</div>
<div class="paragraph">
<p>In the next chapter we are going to see what happens when we use a Dueuno Elements application from a Desktop Computer, from a Tablet and from a Mobile Phone.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_responsive_design">Responsive Design</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are going to see what the <em>User Experience</em> of a Dueuno Elements application looks like on different devices.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-7/image-1.webp" alt="image 1">
</div>
</div>
<div class="sect2">
<h3 id="_getting_ready">Getting ready</h3>
<div class="paragraph">
<p>Before we go ahead, letâ€™s complicate a little bit the person form so we can see how it changes with different resolutions.</p>
</div>
<div class="paragraph">
<p>We first add some optional fields to the domain object.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/domain/com/example/TPerson.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">grails.gorm.MultiTenant</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDateTime</span>

<span class="type">class</span> <span class="class">TPerson</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TPerson&gt; {
LocalDateTime dateCreated

    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname
    LocalDate birthdate

    <span class="predefined-type">String</span> address
    <span class="predefined-type">String</span> city
    <span class="predefined-type">String</span> postCode
    <span class="predefined-type">String</span> state
    <span class="predefined-type">String</span> country

    <span class="directive">static</span> constraints = {
        address <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        city <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        postCode <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        state <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        country <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We then update the table view to display the new columns.</p>
</div>
<div class="listingblock">
<div class="title">Edit the method <code>index()</code> in <code>~/demo/grails-app/controllers/com/example/PersonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> <span class="function">index</span>() {
    <span class="keyword">def</span> c = createContent(ContentList)
    c.table.with {
        filters.with {
            addField(
                    <span class="type">class</span>: <span class="class">DateField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">3</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">9</span>,
            )
        }
        sortable = [
                <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
        ]
        columns = [
                <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">address</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">city</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">postCode</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">state</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">country</span><span class="delimiter">'</span></span>,
        ]
    }

    c.table.body = personService.list(c.table.filterParams, c.table.fetchParams)
    c.table.paginate = personService.count(c.table.filterParams)

    display <span class="key">content</span>: c
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To layout the fields in a Dueuno Elements <code>Form</code> we use the <code>cols</code> parameter. It represents the number of columns the field will occupy in a line. Since Dueuno Elements uses <a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a> under the hood, we use its <a href="https://getbootstrap.com/docs/5.3/layout/grid/" target="_blank" rel="noopener">Grid System</a> to decide how to layout fields in a form.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In short, we have 12 invisible columns for each row. Each field can occupy one single column or any number of columns up to 12. Itâ€™s up to us to decide what layout best fits our needs.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Edit the method <code>buildForm()</code> in <code>~/demo/grails-app/controllers/com/example/PersonController.groovy</code> to add the new fields to the form</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">private</span> ContentForm buildForm(TPerson obj = <span class="predefined-constant">null</span>) {
    <span class="keyword">def</span> c = obj
        ? createContent(ContentEdit)
        : createContent(ContentCreate)

    c.form.with {
        validate = TPerson
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">DateField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">Separator</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">s1</span><span class="delimiter">'</span></span>,
                <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-earth-americas</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">12</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">address</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">12</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">city</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">postCode</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">state</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
                <span class="type">class</span>: <span class="class">TextField</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">country</span><span class="delimiter">'</span></span>,
                <span class="key">cols</span>: <span class="integer">6</span>,
        )
    }

    <span class="keyword">if</span> (obj) {
        c.form.values = obj
    }

    <span class="keyword">return</span> c
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, since we have confgiured the application to work with an H2 database on a file, we can just delete the application <code>demo</code> folder and let the application reinstall from scratch and recreate the database.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Delete the <code>~/demo/demo</code> folder
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-7/image-2.webp" alt="image 2">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-7/image-3.webp" alt="image 3">
</div>
</div>
<div class="paragraph">
<p>We are now ready to watch some homemade videos. I know you like homemade videos&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_laptop">12" Laptop</h3>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/IiChXxMPKT8?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_14_touchscreen_laptop">14" Touchscreen Laptop</h3>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/uqPxaLJ8mFc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apple_ipad">Apple iPad</h3>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/LjYa_-MiwK0?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apple_iphone">Apple iPhone</h3>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/dxJI-ihsg_M?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_meta_quest_2">Meta Quest 2</h3>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/X8TmOplEX9c?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusions">Conclusions</h3>
<div class="paragraph">
<p>As we have seen, Dueuno Elements applications work out of the box on different devices. They are not optimized for any one of them, but hey, they work without you having to worry about it.</p>
</div>
<div class="paragraph">
<p>To answer the question you have in your mind right now: yes, we can optimize them but that requires building specific components. It will cost more, of course.</p>
</div>
<div class="paragraph">
<p>In the next chapter we are going to create a <em>One-To-Many</em> relationship on our database and see how we can manage it on the screen.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_one_to_many_relationships">One-to-Many Relationships</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s give a job to our people, linking them to a <code>Company</code>. We are going to surf bottom-up from the Domain <em>(data)</em>, to the Services <em>(logic)</em>, the Controllers <em>(GUI)</em> ending up registering our new <em>feature</em> to the users.</p>
</div>
<div class="paragraph">
<p>I donâ€™t care if you think this is <em>right or wrong</em>, this is how we usually approach Dueuno Elements application development. But sometimes we do the opposite. You see&#8230;&#8203; <em>it depends&#8230;&#8203;</em></p>
</div>
<div class="sect2">
<h3 id="_the_domain">The Domain</h3>
<div class="paragraph">
<p>We start from the bottom, the Domain. In our demo application itâ€™s implemented as a set of <a href="https://gorm.grails.org/" target="_blank" rel="noopener">GORM</a> entities: Groovy classes that represents, and are mapped to, database tables.</p>
</div>
<div class="listingblock">
<div class="title">Create the class <code>~/demo/grails-app/domain/com/example/TCompany.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">grails.gorm.MultiTenant</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDateTime</span>

<span class="type">class</span> <span class="class">TCompany</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TCompany&gt; {
LocalDateTime dateCreated
<span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [
        <span class="key">emplyees</span>: TPerson,
    ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Edit the class <code>~/demo/grails-app/domain/com/example/TPerson.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">grails.gorm.MultiTenant</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDateTime</span>

<span class="type">class</span> <span class="class">TPerson</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TPerson&gt; {
LocalDateTime dateCreated

    <span class="predefined-type">String</span> firstname
    <span class="predefined-type">String</span> lastname
    LocalDate birthdate

    <span class="predefined-type">String</span> address
    <span class="predefined-type">String</span> city
    <span class="predefined-type">String</span> postCode
    <span class="predefined-type">String</span> state
    <span class="predefined-type">String</span> country

    TCompany company
    <span class="directive">static</span> belongsTo = [
        <span class="key">company</span>: TCompany,
    ]

    <span class="directive">static</span> constraints = {
        address <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        city <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        postCode <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        state <span class="key">nullable</span>: <span class="predefined-constant">true</span>
        country <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Weâ€™ve associated the two domain classes as follow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TPerson</code> belongs to a <code>TCompany</code><br>
It means that each record of a person will have a column (<code>company_id</code>) referencing its company.</p>
</li>
<li>
<p><code>TCompany</code> has many <code>TPerson</code><br>
It means that each company will be able to reference its employees navigating through them</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To have a better understanding of the code above please refer to the <a href="https://gorm.grails.org/latest/hibernate/manual/index.html" target="_blank" rel="noopener">GORM Hibernate documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_services">The Services</h3>
<div class="paragraph">
<p>The <code>CompanyService</code> will hold the logic to query and operate with the <code>TCompany</code> domain object. It is almost the same as the <code>PersonService</code>, in fact Iâ€™ve just duplicated it replacing <code>TPerson</code> with <code>TCompany</code> and added some more filters to the main query.</p>
</div>
<div class="listingblock">
<div class="title">Create the class <code>~/demo/grails-app/services/com/example/CompanyService.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.exceptions.ArgsException</span>
<span class="keyword">import</span> <span class="include">grails.gorm.DetachedCriteria</span>
<span class="keyword">import</span> <span class="include">grails.gorm.multitenancy.CurrentTenant</span>

<span class="keyword">import</span> <span class="include">javax.annotation.PostConstruct</span>

<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">CompanyService</span> {

    <span class="annotation">@PostConstruct</span>
    <span class="type">void</span> init() {
        <span class="comment">// Executes only once when the application starts</span>
    }

    <span class="directive">private</span> DetachedCriteria&lt;TCompany&gt; buildQuery(<span class="predefined-type">Map</span> filterParams) {
        <span class="keyword">def</span> query = TCompany.where {}

        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)) query = query.where { id == filterParams.id }

        <span class="keyword">if</span> (filterParams.find) {
            <span class="predefined-type">String</span> search = filterParams.find.replaceAll(<span class="string"><span class="delimiter">'</span><span class="char">\\</span><span class="content">*</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)
            query = query.where { <span class="integer">1</span> == <span class="integer">1</span>
                || name =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
            }
        }

        <span class="comment">// Add additional filters here</span>

        <span class="keyword">return</span> query
    }

    TCompany get(<span class="predefined-type">Serializable</span> id) {
        <span class="comment">// Add any relationships here (Eg. references to other DomainObjects or hasMany)</span>
        <span class="predefined-type">Map</span> fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">return</span> buildQuery(<span class="key">id</span>: id).get(<span class="key">fetch</span>: fetch)
    }

    <span class="predefined-type">List</span>&lt;TCompany&gt; list(<span class="predefined-type">Map</span> filterParams = [:], <span class="predefined-type">Map</span> fetchParams = [:]) {
        <span class="keyword">if</span> (!fetchParams.sort) fetchParams.sort = [<span class="key">dateCreated</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>]

        <span class="comment">// Add single-sided relationships here (Eg. references to other DomainObjects)</span>
        <span class="comment">// DO NOT add hasMany relationships, you are going to have troubles with pagination</span>
        fetchParams.fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.list(fetchParams)
    }

    <span class="predefined-type">Integer</span> count(<span class="predefined-type">Map</span> filterParams = [:]) {
        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.count()
    }

    TCompany create(<span class="predefined-type">Map</span> args = [:]) {
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TCompany obj = <span class="keyword">new</span> TCompany(args)
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    TCompany update(<span class="predefined-type">Map</span> args = [:]) {
        <span class="predefined-type">Serializable</span> id = ArgsException.requireArgument(args, <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TCompany obj = get(id)
        obj.properties = args
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        TCompany obj = get(id)
        obj.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create the class <code>~/demo/grails-app/services/com/example/PersonService.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.exceptions.ArgsException</span>
<span class="keyword">import</span> <span class="include">grails.gorm.DetachedCriteria</span>
<span class="keyword">import</span> <span class="include">grails.gorm.multitenancy.CurrentTenant</span>
<span class="keyword">import</span> <span class="include">javax.annotation.PostConstruct</span>

<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">PersonService</span> {

    <span class="annotation">@PostConstruct</span>
    <span class="type">void</span> init() {
        <span class="comment">// Executes only once when the application starts</span>
    }

    <span class="directive">private</span> DetachedCriteria&lt;TPerson&gt; buildQuery(<span class="predefined-type">Map</span> filterParams) {
        <span class="keyword">def</span> query = TPerson.where {}

        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)) query = query.where { id == filterParams.id }
        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>)) query = query.where { lastname == filterParams.lastname }
        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>)) query = query.where { birthdate == filterParams.birthdate }
        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">company</span><span class="delimiter">'</span></span>)) query = query.where { company.id == filterParams.company }

        <span class="keyword">if</span> (filterParams.find) {
            <span class="predefined-type">String</span> search = filterParams.find.replaceAll(<span class="string"><span class="delimiter">'</span><span class="char">\\</span><span class="content">*</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)
            query = query.where { <span class="integer">1</span> == <span class="integer">1</span>
                || firstname =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
                || lastname =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
            }
        }

        <span class="comment">// Add additional filters here</span>

        <span class="keyword">return</span> query
    }

    TPerson get(<span class="predefined-type">Serializable</span> id) {
        <span class="comment">// Add any relationships here (Eg. references to other DomainObjects or hasMany)</span>
        <span class="predefined-type">Map</span> fetch = [
                <span class="key">company</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">return</span> buildQuery(<span class="key">id</span>: id).get(<span class="key">fetch</span>: fetch)
    }

    <span class="predefined-type">List</span>&lt;TPerson&gt; list(<span class="predefined-type">Map</span> filterParams = [:], <span class="predefined-type">Map</span> fetchParams = [:]) {
        <span class="keyword">if</span> (!fetchParams.sort) fetchParams.sort = [<span class="key">dateCreated</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>]

        <span class="comment">// Add single-sided relationships here (Eg. references to other DomainObjects)</span>
        <span class="comment">// DO NOT add hasMany relationships, you are going to have troubles with pagination</span>
        fetchParams.fetch = [
                <span class="key">company</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.list(fetchParams)
    }

    <span class="predefined-type">Integer</span> count(<span class="predefined-type">Map</span> filterParams = [:]) {
        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.count()
    }

    TPerson create(<span class="predefined-type">Map</span> args = [:]) {
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TPerson obj = <span class="keyword">new</span> TPerson(args)
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    TPerson update(<span class="predefined-type">Map</span> args = [:]) {
        <span class="predefined-type">Serializable</span> id = ArgsException.requireArgument(args, <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TPerson obj = get(id)
        obj.properties = args
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        TPerson obj = get(id)
        obj.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_controllers">The Controllers</h3>
<div class="paragraph">
<p>The <code>CompanyController</code> <code>edit()</code> action will display the name of the company and a list of its employees. To do that we need to add a <code>Table</code> component to the <code>Content</code>.</p>
</div>
<div class="paragraph">
<p>The <code>CompanyController</code> is basically the same as the <code>PersonController</code>, in fact weâ€™ve just duplicated it replacing <code>TPerson</code> with <code>TCompany</code>, adding a reference to the <code>CompanyService</code> (injected by Grails) and changing the <code>buildForm()</code> method to add the <code>Table</code>.</p>
</div>
<div class="listingblock">
<div class="title">Create the class <code>~/demo/grails-app/controllers/com/example/CompanyController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.components.Table</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentCreate</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentEdit</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentList</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.TextField</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.style.TextDefault</span>

<span class="type">class</span> <span class="class">CompanyController</span> <span class="directive">implements</span> ElementsController {

    PersonService personService
    CompanyService companyService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            filters.with {
                addField(
                        <span class="type">class</span>: <span class="class">TextField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                        <span class="key">label</span>: TextDefault.FIND,
                )
            }
            sortable = [
                    <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
            ]
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,
            ]
        }

        c.table.body = companyService.list(c.table.filterParams, c.table.fetchParams)
        c.table.paginate = companyService.count(c.table.filterParams)

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> ContentForm buildForm(TCompany obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = TCompany
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj

            <span class="keyword">def</span> table = c.addComponent(Table)
            table.with {
                rowActions = <span class="predefined-constant">false</span>
                rowHighlight = <span class="predefined-constant">false</span>
                columns = [
                        <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">country</span><span class="delimiter">'</span></span>,
                ]
                body = personService.list(<span class="key">company</span>: obj.id)
            }
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() {
        <span class="keyword">def</span> obj = companyService.create(params)

        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = companyService.get(params.id)
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="keyword">def</span> obj = companyService.update(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            companyService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We need to add the <code>company</code> field to the <code>PersonController</code> table and form as well.</p>
</div>
<div class="paragraph">
<p>To be able to actually see something meaningful in the <code>Select</code> control listing all the companies, we need to register a <code>PrettyPrinter</code>. This is a <em>templating mechanism</em> we use to render a domain object as a <code>String</code>. We are going to register it in the next paragraph along with the new <em>feature</em>.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/controllers/com.example/PersonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.components.Separator</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentCreate</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentEdit</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentList</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.DateField</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.Select</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.TextField</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.style.TextDefault</span>

<span class="type">class</span> <span class="class">PersonController</span> <span class="directive">implements</span> ElementsController {

    PersonService personService
    CompanyService companyService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            filters.with {
                addField(
                        <span class="type">class</span>: <span class="class">DateField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                        <span class="key">cols</span>: <span class="integer">3</span>,
                )
                addField(
                        <span class="type">class</span>: <span class="class">TextField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                        <span class="key">label</span>: TextDefault.FIND,
                        <span class="key">cols</span>: <span class="integer">9</span>,
                )
            }
            sortable = [
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
            ]
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">company</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">address</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">city</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">postCode</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">state</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">country</span><span class="delimiter">'</span></span>,
            ]
        }

        c.table.body = personService.list(c.table.filterParams, c.table.fetchParams)
        c.table.paginate = personService.count(c.table.filterParams)

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> ContentForm buildForm(TPerson obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = TPerson
            addField(
                    <span class="type">class</span>: <span class="class">Select</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">company</span><span class="delimiter">'</span></span>,
                    <span class="key">optionsFromRecordset</span>: companyService.list(),
                    <span class="key">cols</span>: <span class="integer">12</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">DateField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">birthdate</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )

            addField(
                    <span class="type">class</span>: <span class="class">Separator</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">s1</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-earth-americas</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">12</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">address</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">12</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">city</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">postCode</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">state</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">country</span><span class="delimiter">'</span></span>,
                    <span class="key">cols</span>: <span class="integer">6</span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() {
        <span class="keyword">def</span> obj = personService.create(params)

        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = personService.get(params.id)
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="keyword">def</span> obj = personService.update(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            personService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_features">The Features</h3>
<div class="paragraph">
<p>We need to let the users access the newly created <code>CompanyController</code>. We do so by registering a new feature. Since we are here, we are going to mock-up a couple of companies too, so we can test the application.</p>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/init/com/example/BootStrap.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.core.ApplicationService</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.tenants.TenantPropertyService</span>
<span class="keyword">import</span> <span class="include">java.time.LocalDate</span>

<span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService
    TenantPropertyService tenantPropertyService
    PersonService personService
    CompanyService companyService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onInstall { <span class="predefined-type">String</span> tenantId -&gt;
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">PRIMARY_BACKGROUND_COLOR</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">#018B84</span><span class="delimiter">'</span></span>)
            tenantPropertyService.setNumber(<span class="string"><span class="delimiter">'</span><span class="content">PRIMARY_BACKGROUND_COLOR_ALPHA</span><span class="delimiter">'</span></span>, <span class="float">0.25</span>)
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">LOGIN_COPY</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">2024 &amp;copy; &lt;a href=&quot;https://my-company.com&quot; target=&quot;_blank&quot;&gt;My Company&lt;/a&gt;&lt;br/&gt;Made in Italy</span><span class="delimiter">'</span></span>)
        }

        applicationService.onDevInstall { <span class="predefined-type">String</span> tenantId -&gt;

            <span class="keyword">def</span> yourCompany = companyService.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Your Company</span><span class="delimiter">'</span></span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
            <span class="keyword">def</span> theirCompany = companyService.create(<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Their Company</span><span class="delimiter">'</span></span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)

            personService.create(
                    <span class="key">company</span>: yourCompany,
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Felicity</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Green</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">1</span>, <span class="integer">2</span>),
                    <span class="key">failOnError</span>: <span class="predefined-constant">true</span>,
            )
            personService.create(
                    <span class="key">company</span>: yourCompany,
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Grace</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Blue</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">2</span>, <span class="integer">1</span>),
                    <span class="key">failOnError</span>: <span class="predefined-constant">true</span>,
            )
            personService.create(
                    <span class="key">company</span>: theirCompany,
                    <span class="key">firstname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Joy</span><span class="delimiter">'</span></span>,
                    <span class="key">lastname</span>: <span class="string"><span class="delimiter">'</span><span class="content">Red</span><span class="delimiter">'</span></span>,
                    <span class="key">birthdate</span>: LocalDate.of(<span class="integer">2021</span>, <span class="integer">12</span>, <span class="integer">21</span>),
                    <span class="key">failOnError</span>: <span class="predefined-constant">true</span>,
            )
        }

        applicationService.init {
            registerPrettyPrinter(TCompany, <span class="string"><span class="delimiter">'</span><span class="content">${it.name}</span><span class="delimiter">'</span></span>)
            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">person</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
                    <span class="key">favourite</span>: <span class="predefined-constant">true</span>,
            )
            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">company</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-briefcase</span><span class="delimiter">'</span></span>,
            )
        }
    }

    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>registerPrettyPrinter()</code> call configures a renderer for the <code>TCompany</code> objects. In the string template (see <a href="https://docs.groovy-lang.org/docs/next/html/documentation/template-engines.html#_gstringtemplateengine" target="_blank" rel="noopener">Groovy String Template Engines</a>) we can reference any <code>TCompany</code> class property. The <code>it</code> symbol will references an instance of a <code>TCompany</code> object.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Delete the <code>~/demo/demo</code> folder
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/Qt9VvT4p6fU?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table">Table</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the most important components in a Dueuno Elements application is the <code>Table</code> component. Its main purpose is displaying data in columns and rows. Usually, each row displays a record on a database, but it can display anything from in-memory data to the results of a web service call.</p>
</div>
<div class="paragraph">
<p>The user can interact by clicking on one of the buttons displayed on the left side of each row. By default the <code>Table</code> component creates the <code>edit</code> and <code>delete</code> buttons. We call them <em>actions</em>. Actions can be customized removing or adding as many as we need. Each row can have different actions depending on the logged-in user or a specific state of the record.</p>
</div>
<div class="sect2">
<h3 id="_sample_crud">Sample CRUD</h3>
<div class="paragraph">
<p>To talk about the <code>Table</code> component we are going to create a new CRUD to manage our books. Let&#8217;s create what we need:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A <code>TBook</code> domain class to <em>persist our books</em></p>
</li>
<li>
<p>A <code>BookService</code> to implement the <em>Business Logic</em></p>
</li>
<li>
<p>A <code>BookController</code> to implement the <em>User Interface</em></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/domain/com/example/TBook.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">grails.gorm.MultiTenant</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>

<span class="keyword">import</span> <span class="include">java.time.LocalDateTime</span>

<span class="type">class</span> <span class="class">TBook</span> <span class="directive">implements</span> GormEntity, MultiTenant&lt;TBook&gt; {

    <span class="predefined-type">String</span> title
    <span class="predefined-type">String</span> author
    <span class="predefined-type">String</span> description
    <span class="predefined-type">Boolean</span> taken

    <span class="directive">static</span> constraints = {
    }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/services/com/example/BookService.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.exceptions.ArgsException</span>
<span class="keyword">import</span> <span class="include">grails.gorm.DetachedCriteria</span>
<span class="keyword">import</span> <span class="include">grails.gorm.multitenancy.CurrentTenant</span>

<span class="keyword">import</span> <span class="include">javax.annotation.PostConstruct</span>

<span class="annotation">@CurrentTenant</span>
<span class="type">class</span> <span class="class">BookService</span> {

    <span class="annotation">@PostConstruct</span>
    <span class="type">void</span> init() {
        <span class="comment">// Executes only once when the application starts</span>
    }

    <span class="directive">private</span> DetachedCriteria&lt;TBook&gt; buildQuery(<span class="predefined-type">Map</span> filterParams) {
        <span class="keyword">def</span> query = TBook.where {}

        <span class="keyword">if</span> (filterParams.containsKey(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)) query = query.where { id == filterParams.id }

        <span class="keyword">if</span> (filterParams.find) {
            <span class="predefined-type">String</span> search = filterParams.find.replaceAll(<span class="string"><span class="delimiter">'</span><span class="char">\\</span><span class="content">*</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)
            query = query.where { <span class="integer">1</span> == <span class="integer">1</span>
                || title =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
                || author =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
                || description =~ <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="inline"><span class="inline-delimiter">${</span>search<span class="inline-delimiter">}</span></span><span class="content">%</span><span class="delimiter">&quot;</span></span>
            }
        }

        <span class="comment">// Add additional filters here</span>

        <span class="keyword">return</span> query
    }

    TBook get(<span class="predefined-type">Serializable</span> id) {
        <span class="comment">// Add any relationships here (Eg. references to other DomainObjects or hasMany)</span>
        <span class="predefined-type">Map</span> fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">return</span> buildQuery(<span class="key">id</span>: id).get(<span class="key">fetch</span>: fetch)
    }

    <span class="predefined-type">List</span>&lt;TBook&gt; list(<span class="predefined-type">Map</span> filterParams = [:], <span class="predefined-type">Map</span> fetchParams = [:]) {
        <span class="keyword">if</span> (!fetchParams.sort) fetchParams.sort = [<span class="key">dateCreated</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>]

        <span class="comment">// Add single-sided relationships here (Eg. references to other DomainObjects)</span>
        <span class="comment">// DO NOT add hasMany relationships, you are going to have troubles with pagination</span>
        fetchParams.fetch = [
                <span class="key">relationshipName</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>,
        ]

        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.list(fetchParams)
    }

    <span class="predefined-type">Integer</span> count(<span class="predefined-type">Map</span> filterParams = [:]) {
        <span class="keyword">def</span> query = buildQuery(filterParams)
        <span class="keyword">return</span> query.count()
    }

    TBook create(<span class="predefined-type">Map</span> args = [:]) {
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TBook obj = <span class="keyword">new</span> TBook(args)
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    TBook update(<span class="predefined-type">Map</span> args = [:]) {
        <span class="predefined-type">Serializable</span> id = ArgsException.requireArgument(args, <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)
        <span class="keyword">if</span> (args.failOnError == <span class="predefined-constant">null</span>) args.failOnError = <span class="predefined-constant">false</span>

        TBook obj = get(id)
        obj.properties = args
        obj.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: args.failOnError)
        <span class="keyword">return</span> obj
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        TBook obj = get(id)
        obj.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>, <span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }

    <span class="type">void</span> take(<span class="predefined-type">Serializable</span> id) {
        update(<span class="key">id</span>: id, <span class="key">taken</span>: <span class="predefined-constant">true</span>)
    }

    <span class="type">void</span> giveBack(<span class="predefined-type">Serializable</span> id) {
        update(<span class="key">id</span>: id, <span class="key">taken</span>: <span class="predefined-constant">false</span>)
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/controllers/com/example/BookController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.components.TableRow</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentCreate</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentEdit</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentForm</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentList</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.Checkbox</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.TextField</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.style.TextDefault</span>

<span class="type">class</span> <span class="class">BookController</span> <span class="directive">implements</span> ElementsController {

    BookService bookService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)
        c.table.with {
            filters.with {
                fold = <span class="predefined-constant">false</span>
                addField(
                        <span class="type">class</span>: <span class="class">TextField</span>,
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">find</span><span class="delimiter">'</span></span>,
                        <span class="key">label</span>: TextDefault.FIND,
                )
            }
            sortable = [
                    <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
                    <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
            ]
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">taken</span><span class="delimiter">'</span></span>,
            ]

            groupActions.addAction(
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onGiveBackAll</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-regular fa-bookmark</span><span class="delimiter">'</span></span>,
                    <span class="key">confirmMessage</span>: <span class="string"><span class="delimiter">'</span><span class="content">book.index.confirm.give.back.all</span><span class="delimiter">'</span></span>,
            )

            body.eachRow { TableRow row, <span class="predefined-type">Map</span> values -&gt;
                <span class="comment">// Do not execute slow operations here to avoid slowing down the table rendering</span>
                <span class="keyword">if</span> (values.taken) {
                    row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onGiveBack</span><span class="delimiter">'</span></span>, <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-regular fa-bookmark</span><span class="delimiter">'</span></span>)
                } <span class="keyword">else</span> {
                    row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onTake</span><span class="delimiter">'</span></span>, <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-solid fa-bookmark</span><span class="delimiter">'</span></span>)
                }
            }
        }

        c.table.body = bookService.list(c.table.filterParams, c.table.fetchParams)
        c.table.paginate = bookService.count(c.table.filterParams)

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> ContentForm buildForm(TBook obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            validate = TBook
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">Checkbox</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">taken</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">onTake</span>() {
        bookService.take(params.id)
        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onGiveBack</span>() {
        bookService.giveBack(params.id)
        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onGiveBackAll</span>() {
        <span class="predefined-type">List</span>&lt;<span class="predefined-type">Long</span>&gt; ids = params.rows.findAll { <span class="local-variable">it</span>.selected }*.id
        <span class="keyword">for</span> (id <span class="keyword">in</span> ids) {
            bookService.giveBack(id)
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() {
        <span class="keyword">def</span> obj = bookService.create(params)

        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> obj = bookService.get(params.id)
        <span class="keyword">def</span> c = buildForm(obj)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="keyword">def</span> obj = bookService.update(params)
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj
            <span class="keyword">return</span>
        }

        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="keyword">try</span> {
            bookService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Edit <code>~/demo/grails-app/init/com/example/BootStrap.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">    <span class="keyword">def</span> init = { servletContext -&gt;

        ...

        applicationService.onDevInstall { <span class="predefined-type">String</span> tenantId -&gt;

            ...

            bookService.create(
                    <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>,
                    <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>,
                    <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>,
                    <span class="key">borrowed</span>: <span class="predefined-constant">false</span>,
                    <span class="key">failOnError</span>: <span class="predefined-constant">true</span>,
            )
            bookService.create(
                    <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>,
                    <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>,
                    <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>,
                    <span class="key">borrowed</span>: <span class="predefined-constant">false</span>,
                    <span class="key">failOnError</span>: <span class="predefined-constant">true</span>,
            )
        }

        applicationService.init {

            ...

            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-book</span><span class="delimiter">'</span></span>,
            )
        }
    }</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Delete the <code>~/demo/demo</code> folder
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/iymb4FnC2Hc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_loading_data">Loading Data</h3>
<div class="paragraph">
<p>What can we load a table with?</p>
</div>
<div class="sect4">
<h5 id="_list_of_lists">List of Lists</h5>
<div class="paragraph">
<p>Loading a table with a List of Lists is possible, the sequence will determine how each column will be mapped to each value. There is no hard relationship between the displayed column name and the value.</p>
</div>
<div class="paragraph">
<p>For this reason we suggest using <a href="#list-of-maps">List of Maps</a> instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    [<span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>],
    [<span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>],
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="list-of-maps">List of Maps</h5>
<div class="paragraph">
<p>We can load a table with a "recordset" style data structure like the List of Maps. This way each column will display exactly the value associated to the key of the record (<code>Map</code>) having the same name of the column.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    [<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">1</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>],
    [<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">2</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>],
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_list_of_pogos">List of POGOs</h5>
<div class="paragraph">
<p>A List of <em>Plain Old Groovy Objects</em> can also be used to load a table.</p>
</div>
<div class="paragraph">
<p>Given this POGO:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> id
    <span class="predefined-type">String</span> title
    Strng author
    <span class="predefined-type">String</span> description
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can load our table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">1</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>),
    <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">2</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>),
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_gorm_recordsets">GORM Recordsets</h5>
<div class="paragraph">
<p>Using a <a href="https://gorm.grails.org/latest/hibernate/manual/" target="_blank" rel="noopener">GORM Recordset</a> is an easy way to load a table.</p>
</div>
<div class="paragraph">
<p>Given this domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">TBook</span> {
    <span class="predefined-type">String</span> title
    Strng author
    <span class="predefined-type">String</span> description
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can load our table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,
    ]
    body = TBook.list()
    paginate = TBook.count()
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_row_actions">Row Actions</h3>
<div class="paragraph">
<p>There are two ways to configure row actions. All at once and on a row basis. To set all rows to have the same actions we can set them up in the table namespace as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]
    actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onTake</span><span class="delimiter">'</span></span>)
    actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onGiveBack</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we need to configure the row actions depending on the record values, or other logics, we can do it from the <code>eachRow</code> closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]

    body.eachRow { TableRow row, <span class="predefined-type">Map</span> values -&gt;
        <span class="keyword">if</span> (values.borrowed) {
            row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onGiveBack</span><span class="delimiter">'</span></span>)
        } <span class="keyword">else</span> {
            row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onTake</span><span class="delimiter">'</span></span>)
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_group_actions">Group Actions</h3>
<div class="paragraph">
<p>The table can be configured to select multiple rows ad apply to all of them the same action. In this case we need to explicitly configure the action to submit the <code>Table</code> component so we can access its selected rows. The default <code>id</code> of the <code>Table</code> component embedded in the <code>ContentList</code> is <code>table</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]

    groupActions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onTake</span><span class="delimiter">'</span></span>, <span class="key">submit</span>: <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>)
    groupActions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onGiveBack</span><span class="delimiter">'</span></span>, <span class="key">submit</span>: <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_filters">Filters</h3>
<div class="paragraph">
<p>Each table can have its own search <code>Form</code> to filter results. When submitting the filters, the action where they have been defined will be reloaded and the filters values will be available in the Grails <code>params</code> map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    filters.with {
        addField(
            <span class="type">class</span>: <span class="class">TextField</span>,
            <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">search</span><span class="delimiter">'</span></span>,
        )
    }

    <span class="predefined-type">Map</span> filters = c.table.filterParams <i class="conum" data-value="1"></i><b>(1)</b>
    c.table.body = bookService.list(filters)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The submitted values of the filters fields.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pagination">Pagination</h3>
<div class="paragraph">
<p>The <code>Table</code> component let us paginate the results with a single instruction assigning the total record count. Underneath it uses the same params that <a href="https://gorm.grails.org/latest/hibernate/manual/" target="_blank" rel="noopener">GORM Recordset</a> uses to paginate and sort its results. They are stored in the variable <code>c.table.fetchParams</code> and we can use it right away to instruct our GORM queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]

    body = bookService.list(c.table.filterParams, c.table.fetchParams)
    paginate = bookService.count(c.table.filterParams)
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">GORM Query</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> results = TBook.list(c.table.fetchParams)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_buttons">Buttons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Button</code> is the main <em>human-interaction</em> point in a GUI. A button triggers an action, usually sending data that will be processed, in our case, by the server.</p>
</div>
<div class="sect2">
<h3 id="_anatomy_of_a_button">Anatomy of a Button</h3>
<div class="paragraph">
<p>Buttons in Dueuno Elements are made up of three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mainAction</code><br>
A <code>Button</code> with just a main action will look like a common button. It will display just one text label, and it will trigger just one action. The main action will always take the first position from left to right in a button.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-10/button_mainAction.png" alt="button mainAction">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tailAction</code><br>
The tail action, if present, will be displayed in the second position from left to right, just after the main action. It will trigger a second action.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-10/button_tailAction.png" alt="button tailAction">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>actions</code><br>
All other actions added to the <code>Button</code> will be placed into a list. The list can be shown clicking the arrow button that will appear on the right side. A menu will be displayed with all the available actions.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/chapter-10/button_actions.png" alt="button actions">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s create a controller to see how buttons are used in a form.</p>
</div>
<div class="listingblock">
<div class="title">Create <code>~/demo/grails-app/controller/com/example/ButtonController.groovy</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.example

<span class="keyword">import</span> <span class="include">dueuno.elements.components.Button</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.contents.ContentForm</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.controls.TextField</span>
<span class="keyword">import</span> <span class="include">dueuno.elements.core.ElementsController</span>

<span class="type">class</span> <span class="class">ButtonController</span> <span class="directive">implements</span> ElementsController {

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentForm)

        c.header.removeNextButton()

        c.form.with {
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">text</span><span class="delimiter">'</span></span>,
                    <span class="key">defaultValue</span>: <span class="string"><span class="delimiter">'</span><span class="content">You are the journey</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">Button</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>,
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onShow</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
                    <span class="key">primary</span>: <span class="predefined-constant">true</span>,
                    <span class="key">cols</span>: <span class="integer">4</span>,
            )
            <span class="predefined-type">Button</span> caseBtn = addField(
                    <span class="type">class</span>: <span class="class">Button</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">lowercase</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-circle-down</span><span class="delimiter">'</span></span>,
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onLowercase</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
                    <span class="key">cols</span>: <span class="integer">4</span>,
            ).component
            caseBtn.addTailAction(
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onUppercase</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
                    <span class="key">text</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-circle-up</span><span class="delimiter">'</span></span>,
            )

            <span class="predefined-type">Button</span> capitalizeBtn = addField(
                    <span class="type">class</span>: <span class="class">Button</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">capitalize</span><span class="delimiter">'</span></span>,
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onCapitalize</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
                    <span class="key">cols</span>: <span class="integer">4</span>,
            ).component
            capitalizeBtn.addAction(
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onUncapitalize</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
            )
            capitalizeBtn.addAction(
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onQuote</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
            )
            capitalizeBtn.addAction(
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onHighlight</span><span class="delimiter">'</span></span>,
                    <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
            )
        }

        display <span class="key">content</span>: c
    }

    <span class="keyword">def</span> <span class="function">onShow</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: text
    }

    <span class="keyword">def</span> <span class="function">onUppercase</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: text.toUpperCase()
    }

    <span class="keyword">def</span> <span class="function">onLowercase</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: text.toLowerCase()
    }

    <span class="keyword">def</span> <span class="function">onCapitalize</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: text.split(<span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>)*.capitalize().join(<span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>)
    }

    <span class="keyword">def</span> <span class="function">onUncapitalize</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: text.split(<span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>)*.uncapitalize().join(<span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span>)
    }

    <span class="keyword">def</span> <span class="function">onQuote</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">'</span><span class="inline"><span class="inline-delimiter">${</span>text<span class="inline-delimiter">}</span></span><span class="content">'</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">onHighlight</span>() {
        <span class="predefined-type">String</span> text = params.text
        display <span class="key">message</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">- </span><span class="inline"><span class="inline-delimiter">${</span>text<span class="inline-delimiter">}</span></span><span class="content"> -</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Execute the application</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="console">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/lATAEaMBINo?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_actions">Actions</h3>
<div class="paragraph">
<p>Each button action is implemented by a <code>Link</code> component. <a href="chapters/api-reference.html#link">See the <code>Link</code> properties</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2">---</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="api-reference">API Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dueuno Elements is a <a href="https://grails.org/" target="_blank" rel="noopener">Grails</a> plugin useful to develop backoffice applications.</p>
</div>
<div class="sect2">
<h3 id="_create_an_application">Create an application</h3>
<div class="paragraph">
<p>Use <a href="https://start.grails.org" target="_blank" rel="noopener">Grails Forge</a> to generate a <strong>Web Application</strong> with <strong>Java 17</strong> (we support only Java 17) then add the following repository and dependency to your newly created Grails application:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    &#8230;&#8203;
    implementation <span class="string"><span class="delimiter">&quot;</span><span class="content">org.dueuno:elements-core:2.x-SNAPSHOT</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add the following code to initialize the application:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.init {
            <span class="comment">// no-op </span><i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It&#8217;s okay to leave the <code>init</code> closure empty, but the declaration must exist otherwise the application will not be initialized and you won&#8217;t be able to login.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Just delete the autogenerated file <code>grails-app/controllers/**/UrlMappings.groovy</code> if you want to present a login screen to your users when they first reach your application.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_optional_steps">Optional steps</h3>
<div class="paragraph">
<p>Configure the application to display the <em>Dueuno Elements</em> logs and  banner. Add the following code to the relative files:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">spring</span>:
  <span class="key">main</span>:
    <span class="key">banner-mode</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">log</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/logback.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;logger</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.boot.SpringApplication</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;logger</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dueuno</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">level</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INFO</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_login_2">Login</h3>
<div class="paragraph">
<p>At this point you should be able to run the application, point your browser to <code><a href="http://localhost:8080" class="bare" target="_blank" rel="noopener">http://localhost:8080</a></code> and login with the system administrator credentials (username: <code>super</code>, password: <code>super</code>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chapter-2/image-3.webp" alt="The application running">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_url_path">URL Path</h3>
<div class="paragraph">
<p>We can set up our application to be accessible from a specific URL path. For example <code><a href="http://localhost:8080/admin" class="bare">http://localhost:8080/admin</a></code>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService
    TenantPropertyService tenantPropertyService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onInstall { <span class="predefined-type">String</span> tenantId -&gt;
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">SHELL_URL_MAPPING</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">/admin</span><span class="delimiter">'</span></span>)
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">LOGIN_LANDING_URL</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
            tenantPropertyService.setString(<span class="string"><span class="delimiter">'</span><span class="content">LOGOUT_LANDING_URL</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>

        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>After the user logs in the shell will redirect to this path</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When the user logs out the shell will redirect to this path</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We also need to configure the URL mappings to tell Grails what&#8217;s the new configuration. For example if the main controller of our website is <code>WebsiteController.groovy</code> we can create the following file:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/WebsiteUrlMappings.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">WebsiteUrlMappings</span> {

    <span class="directive">static</span> mappings = {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>(<span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">website</span><span class="delimiter">'</span></span>)
        <span class="string"><span class="delimiter">&quot;</span><span class="content">/admin</span><span class="delimiter">&quot;</span></span>(<span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">shell</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The configured path must match the value of the <code>SHELL_URL_MAPPING</code> tenant property.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application">Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ApplicationService</code> is the main component in charge of the application setup, mainly used in <code>BootStrap.groovy</code>. The following are the methods it exposes.</p>
</div>
<div class="sect2">
<h3 id="_init">init()</h3>
<div class="paragraph">
<p>Initializes the application. This closure gets called each time the application is executed.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init { <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Injects an instance of the <code>ApplicationService</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>init { &#8230;&#8203; }</code> closure is executed each time the application starts up</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_beforeinit">beforeInit()</h3>
<div class="paragraph">
<p>Gets executed before the application is initialized. The session is not available you can NOT set session variables from here.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.beforeInit {
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_afterinit">afterInit()</h3>
<div class="paragraph">
<p>Gets executed after the application is initialized. The session is not available you can NOT set session variables from here.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.afterInit {
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_afterlogin">afterLogin()</h3>
<div class="paragraph">
<p>Gets executed after the user logged in. The session is active, you can set session variables from here.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    SecurityService securityService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;

        securityService.afterLogin {
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Injects an instance of the <code>SecurityService</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_afterlogout">afterLogout()</h3>
<div class="paragraph">
<p>Gets executed after the user logged in. The session is NOT active, you can NOT manage session variables from here.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    SecurityService securityService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> init = { servletContext -&gt;

        securityService.afterLogout {
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Injects an instance of the <code>SecurityService</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_oninstall">onInstall()</h3>
<div class="paragraph">
<p>Installs the application. This closure gets called only once when the application is run for the first time. It is executed for the DEFAULT tenant and when a new tenant is created from the super admin GUI.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onInstall { <span class="predefined-type">String</span> tenantId -&gt; <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>tenantId</code> tells what tenant is being installed</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_onsysteminstall">onSystemInstall()</h3>
<div class="paragraph">
<p>Gets executed only the first time the application is run.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onSystemInstall {
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_onplugininstall">onPluginInstall()</h3>
<div class="paragraph">
<p>Gets executed only the first time the application is run. It is used to install plugins.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onPluginInstall { <span class="predefined-type">String</span> tenantId -&gt;
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ondevinstall">onDevInstall()</h3>
<div class="paragraph">
<p>Gets executed only once if the application is run from the IDE (only when the development environment is active). You can use this to preload data to test the application.</p>
</div>
<div class="paragraph">
<p>This closure will NOT be executed when the application is run as JAR, WAR or when the test environment is active.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.onDevInstall { <span class="predefined-type">String</span> tenantId -&gt;
            <span class="comment">// ...</span>
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_onupdate">onUpdate()</h3>
<div class="paragraph">
<p>On application releases, may you need to update the database or any other component, you can programmatically do it adding an <code>onUpdate</code> closure.</p>
</div>
<div class="paragraph">
<p>These closures get executed only once when the application starts up. The execution order is defined by the argument, in alphabetical order.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt; <i class="conum" data-value="1"></i><b>(1)</b>

        applicationService.onUpdate(<span class="string"><span class="delimiter">'</span><span class="content">2021-01-03</span><span class="delimiter">'</span></span>) { <span class="predefined-type">String</span> tenantId -&gt;
            println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>tenantId<span class="inline-delimiter">}</span></span><span class="content">: UPDATE N.2</span><span class="delimiter">&quot;</span></span>
        }

        applicationService.onUpdate(<span class="string"><span class="delimiter">'</span><span class="content">2021-01-02</span><span class="delimiter">'</span></span>) { <span class="predefined-type">String</span> tenantId -&gt;
            println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>tenantId<span class="inline-delimiter">}</span></span><span class="content">: UPDATE N.1</span><span class="delimiter">&quot;</span></span>
        }

        applicationService.onUpdate(<span class="string"><span class="delimiter">'</span><span class="content">2021-01-05</span><span class="delimiter">'</span></span>) { <span class="predefined-type">String</span> tenantId -&gt;
            println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>tenantId<span class="inline-delimiter">}</span></span><span class="content">: UPDATE N.4</span><span class="delimiter">&quot;</span></span>
        }

        applicationService.onUpdate(<span class="string"><span class="delimiter">'</span><span class="content">2021-01-04</span><span class="delimiter">'</span></span>) { <span class="predefined-type">String</span> tenantId -&gt;
            println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>tenantId<span class="inline-delimiter">}</span></span><span class="content">: UPDATE N.3</span><span class="delimiter">&quot;</span></span>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The closures will be executed in the following order based on the specified version string: <code>2021-01-02</code>, <code>2021-01-03</code>, <code>2021-01-04</code>, <code>2021-01-05</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_registerprettyprinter">registerPrettyPrinter()</h3>
<div class="paragraph">
<p>Registers a string template to render an instance of a specific <em>Class</em>. A pretty printer can be registered with just a name, in this case it must be explicitly assigned to a Control when defining it.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init {
            registerPrettyPrinter(TProject, <span class="string"><span class="delimiter">'</span><span class="content">${it.name}</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
            registerPrettyPrinter(<span class="string"><span class="delimiter">'</span><span class="content">PROJECT_ID</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">${it.padLeft(4, &quot;0&quot;)}</span><span class="delimiter">'</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Registers a pretty printer for the <code>TProject</code> domain class. The <code>it</code> variable will refer to an instance of a <code>TProject</code> in this case we will display the <code>name</code> property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Registers a pretty printer called <code>PROJECT_ID</code>. Since we know that the project id is going to be a <code>String</code> we can call the <code>padLeft()</code> method on it</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_registertransformer">registerTransformer()</h3>
<div class="paragraph">
<p>Registers a callback used to render an instance of a specific <em>Class</em>. To make it work it must be explicitly assigned to a Control when defining it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The closure will receive the value that is being transformed and must return a <em>String</em>.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be careful when using transformers since it may impact performances when the closure takes long time to execute.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService
    SecurityService securityService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init {
            registerTransformer(<span class="string"><span class="delimiter">'</span><span class="content">USER_FULLNAME</span><span class="delimiter">'</span></span>) { <span class="predefined-type">Object</span> value -&gt;
                <span class="keyword">return</span> securityService.getUserByUsername(value).fullname
            }
        }

    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registercredits">registerCredits()</h3>
<div class="paragraph">
<p>Registers a role along with the people who took that role during the development of the project. When a credit reference is registered a new menu item will appear in the <em>User Menu</em>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init {
            registerCredits(<span class="string"><span class="delimiter">'</span><span class="content">Application Development</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Francesco Piceghello</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Gianluca Sartori</span><span class="delimiter">'</span></span>)
        }

    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features">Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>Dueuno Elements</em> application is a container for a finite set of features that you want to expose to the users. Features are defined in the <code>init</code> closure. The main menu on the right side of the GUI lists all the features accessible by a user depending on its privileges.</p>
</div>
<div class="paragraph">
<p>Once defined, features are than implemented in <a href="#controllers">Controllers &amp; Actions</a>.</p>
</div>
<div class="sect2">
<h3 id="registerFeature">registerFeature()</h3>
<div class="paragraph">
<p>Registers a Feature.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init {
            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
                    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-book</span><span class="delimiter">'</span></span>, <i class="conum" data-value="3"></i><b>(3)</b>
                    <span class="key">authorities</span>: [<span class="string"><span class="delimiter">'</span><span class="content">ROLE_CAN_EDIT_BOOKS</span><span class="delimiter">'</span></span>] <i class="conum" data-value="4"></i><b>(4)</b>
            )
            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">read</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-glasses</span><span class="delimiter">'</span></span>,
            )

            registerFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">configuration</span><span class="delimiter">'</span></span>, <i class="conum" data-value="5"></i><b>(5)</b>
            )
            registerFeature(
                    <span class="key">parent</span>: <span class="string"><span class="delimiter">'</span><span class="content">configuration</span><span class="delimiter">'</span></span>, <i class="conum" data-value="6"></i><b>(6)</b>
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">authors</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
            )
            registerFeature(
                    <span class="key">parent</span>: <span class="string"><span class="delimiter">'</span><span class="content">configuration</span><span class="delimiter">'</span></span>,
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">publishers</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user-shield</span><span class="delimiter">'</span></span>,
            )
        }

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name of the controller that implements the feature</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Name of the action to execute when the feature is clicked (default: <code>index</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Menu item icon, you can choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The feature will be displayed only to the users configured with the roles in the list (default: <code>ROLE_USER</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>A feature with just a controller can be created to group features. This will become the parent feature.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Tells the feature which one is its parent</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The controller class must be annotated with <code>@Secured(['ROLE_CAN_EDIT_BOOKS'])</code> to actually block all users without that authority from accessing the feature. See: <a href="#controllers">Controllers &amp; Actions</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Available options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the controller that implements the feature</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> The name of the action to execute (default: <code>index</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> Parameters to add when calling the <code>action</code> or <code>url</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>submit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> List of the component names that will be processed to retrieve the values to be passed when calling the <code>action</code> or <code>url</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> Menu item icon, you can choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authorities</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> The feature will be displayed only to the users configured with the roles in the list (default: <code>ROLE_USER</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>favourite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> If <code>true</code> the feature will be displayed on the bookmark page as well (accessible clicking the home menu)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> An absolute URL. When specified it takes precedence so <code>controller</code> and <code>action</code> won&#8217;t be taken into account</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>direct</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> Menu items are URLs managed by <em>Dueuno Elements</em>. When set to <code>true</code> the URL gets managed directly by the browser without any processing</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> The feature will be displayed in a new browser tab with the provided name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>targetNew</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> The feature will be displayed in a new browser tab (<code>_blank</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confirmMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> Message to display before the feature is displayed giving the option to cancel or confirm the operation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>infoMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>(OPTIONAL)</em> If set, the message will be displayed instead of the feature</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_registeruserfeature">registerUserFeature()</h3>
<div class="paragraph">
<p>Registers a Feature in the <em>User Menu</em>. For the available options see: <a href="#registerFeature">registerFeature()</a></p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;

        applicationService.init {
            registerUserFeature(
                    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">manual</span><span class="delimiter">'</span></span>,
                    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-book</span><span class="delimiter">'</span></span>,
                    <span class="key">targetNew</span>: <span class="predefined-constant">true</span>,
            )
        }

    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controllers">Controllers &amp; Actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_controllers_2">Controllers</h3>
<div class="paragraph">
<p>A controller is a container for a set of actions. When a user interacts with the GUI an Action could be called to execute some logic. Actions are grouped in controllers so we can split and organize the application to fit the business domain.</p>
</div>
<div class="paragraph">
<p>A Controller is a Groovy class and each method is an Action. In the following example we see the structure of a <em>Dueuno Elements</em> controller for a CRUD operation.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Secured</span>([<span class="string"><span class="delimiter">'</span><span class="content">ROLE_CAN_EDIT_BOOKS</span><span class="delimiter">'</span></span>]) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">BookController</span> <span class="directive">implements</span> ElementsController { <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="comment">// will display a list of books</span>
    }

    <span class="keyword">def</span> <span class="function">create</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="comment">// will display a form with book title and author</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="comment">// will create the book record on the database</span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="comment">// will display the details of a book</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>() {
        <span class="comment">// will update the book record on the database</span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() {
        <span class="comment">// will delete a book from the database</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Secured</code> annotation let all the actions from this controller be accessed only by users with the <code>ROLE_CAN_EDIT_BOOKS</code> authority.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implementing <code>ElementsController</code> the <em>Dueuno Elements</em> API will become available</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>As a convention, all actions building and displaying a GUI are named after a verb or a name while all actions that execute a business logic are identified by a name starting with <code>on</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_actions_2">Actions</h3>
<div class="paragraph">
<p>An Action can implement an interactive Graphic User Interface (GUI) or act as an entry point to do some business logic and, if needed, update the user interface.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t implement the business logic directly into actions, we do it into <a href="https://docs.grails.org/latest/guide/services.html" target="_blank" rel="noopener">Grails Services</a>, following Grails conventions and best practices.</p>
</div>
<div class="paragraph">
<p>To display a GUI we need to build one using <a href="#contents">Contents</a> and <a href="#components">Components</a>. In the following example we create a GUI to list, create and edit books:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Secured</span>([<span class="string"><span class="delimiter">'</span><span class="content">ROLE_CAN_EDIT_BOOKS</span><span class="delimiter">'</span></span>])
<span class="type">class</span> <span class="class">BookController</span> <span class="directive">implements</span> ElementsController {

    BookService bookService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList) <i class="conum" data-value="2"></i><b>(2)</b>

        c.table.with {
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            ]
            body = bookService.list()
        }

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> buildForm(<span class="predefined-type">Map</span> obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj <i class="conum" data-value="3"></i><b>(3)</b>
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> book = bookService.get(params.id)
        <span class="keyword">def</span> c = buildForm(book)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>BookService</code> service implements the business logic</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>createContent()</code> instantiates one of the available <a href="#contents">Contents</a> to display a list of records</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Each action ends with a <code>display</code> statement that renders the composed GUI to the browser</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The GUI we build for the <code>create</code> and <code>edit</code> actions is the same. We make sure to use the appropriate content for creating and editing (See <a href="#contents">Contents</a>)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We implement a <code>BookService</code> service with CRUD operations to manage a simple in memory database.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/services/BookService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookService</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> data = [
            [<span class="key">id</span>: <span class="integer">1</span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>],
            [<span class="key">id</span>: <span class="integer">2</span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>],
    ]

    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; list() {
        <span class="keyword">return</span> data
    }

    <span class="predefined-type">Map</span> get(<span class="predefined-type">Serializable</span> id) {
        <span class="keyword">return</span> data.find { <span class="local-variable">it</span>.id == id }
    }

    <span class="type">void</span> create(<span class="predefined-type">Map</span> record) {
        record.id = data.size() + <span class="integer">1</span>
        data.add(record)
    }

    <span class="type">void</span> update(<span class="predefined-type">Map</span> record) {
        <span class="keyword">if</span> (!record.id) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">Exception</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">'id' required to update a record!</span><span class="delimiter">&quot;</span></span>)
        <span class="predefined-type">Map</span> item = data.find { <span class="local-variable">it</span>.id == record.id }
        <span class="keyword">if</span> (item) {
            item.title == record.title
            item.author = record.author
        }
    }

    <span class="type">void</span> delete(<span class="predefined-type">Serializable</span> id) {
        data.removeAll { <span class="local-variable">it</span>.id == id }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Book listing:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-list.png" alt="Book listing">
</div>
</div>
<div class="paragraph">
<p>Editing a book:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-edit.png" alt="Editing a book">
</div>
</div>
</div>
<div class="sect2">
<h3 id="validation">Validation</h3>
<div class="paragraph">
<p>Input from the user must be validated before we can save it. We can use the standard <a href="https://docs.grails.org/latest/guide/validation.html" target="_blank" rel="noopener">Gails Validation</a> to make this happen.</p>
</div>
<div class="paragraph">
<p>For the purpose of this document we are going to use the <a href="https://docs.grails.org/latest/guide/validation.html#:~:text=11.6%20Applying%20Validation%20to%20Other%20Classes" target="_blank" rel="noopener">Validateable Trait</a> to check that the fields are not null and the title is unique. Please refer to the <a href="https://docs.grails.org/latest/guide/validation.html" target="_blank" rel="noopener">Grails Validation</a> documentation to see all possible options.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookValidator.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookValidator</span> <span class="directive">implements</span> Validateable {

    <span class="predefined-type">String</span> title
    <span class="predefined-type">String</span> author

    BookService bookService

    <span class="directive">static</span> constraints = {
        title <span class="key">validator</span>: { <span class="predefined-type">Object</span> val, BookValidator obj, Errors errors -&gt;
            <span class="keyword">if</span> (obj.bookService.getByTitle(val)) {
                errors.rejectValue(<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">unique</span><span class="delimiter">'</span></span>)
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When rejecting values you can use the following default messages:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>range.toosmall</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value between {3} and {4}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>range.toobig</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value between {3} and {4}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matches.invalid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Does not match pattern [{3}]</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>notEqual</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cannot be {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not.inList</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Choose one of {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max.exceeded</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum value {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxSize.exceeded</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum size {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min.notmet</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum value {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minSize.notmet</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum size {3}</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url.invalid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not a valid URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email.invalid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not a valid e-mail</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>creditCard.invalid</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not a valid card number</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unique</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Already exists</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nullable</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Required</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blank</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Required</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We can now implement the whole CRUD interface:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/BookController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookController</span> <span class="directive">implements</span> ElementsController {

    BookService bookService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentList)

        c.table.with {
            columns = [
                    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
                    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            ]
            body = bookService.list()
        }

        display <span class="key">content</span>: c
    }

    <span class="directive">private</span> buildForm(<span class="predefined-type">Map</span> obj = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> c = obj
                ? createContent(ContentEdit)
                : createContent(ContentCreate)

        c.form.with {
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            )
            addField(
                    <span class="type">class</span>: <span class="class">TextField</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            )
        }

        <span class="keyword">if</span> (obj) {
            c.form.values = obj
        }

        <span class="keyword">return</span> c
    }

    <span class="keyword">def</span> <span class="function">create</span>() {
        <span class="keyword">def</span> c = buildForm()
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onCreate</span>(BookValidator obj) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="keyword">return</span>
        }

        bookService.create(params)
        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">edit</span>() {
        <span class="keyword">def</span> book = bookService.get(params.id)
        <span class="keyword">def</span> c = buildForm(book)
        display <span class="key">content</span>: c, <span class="key">modal</span>: <span class="predefined-constant">true</span>
    }

    <span class="keyword">def</span> <span class="function">onEdit</span>(BookValidator obj) { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (obj.hasErrors()) {
            display <span class="key">errors</span>: obj <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="keyword">return</span>
        }

        bookService.update(params)
        display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>
    }

    <span class="keyword">def</span> <span class="function">onDelete</span>() { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">try</span> {
            bookService.delete(params.id)
            display <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>

        } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            display <span class="key">exception</span>: e
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We use our <code>BookValidator</code> class to make sure the fields are not <code>null</code> and the title is unique and, in case, highlight the invalid fields</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The name of these methods is defined by the <code>ContentList</code>, <code>ContentCreate</code> and <code>ContentEdit</code> contents, you can see them in your browser hovering the mouse over the <code>Delete</code>, <code>Create</code> and <code>Save</code> buttons (look the bottom left of your browser to see which URL is going to be called when clicking the buttons)</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-validation.png" alt="Book listing">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization_i18n">Internationalization (i18n)</h3>
<div class="paragraph">
<p>When building the GUI, <em>Dueuno Elements</em> automatically suggests labels for any relevant component requiring a text. To translate those labels we just copy them to its corresponding <code>grails-app/i18n/messages_*.properties</code> file giving them a translation.</p>
</div>
<div class="paragraph">
<p>For example to enable the English and Italian languages we can do as follows.</p>
</div>
<div class="paragraph">
<p>English:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/i18n/messages.properties.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>shell.book=Books
shell.read=Read
book.index.header.title=Books
book.create.header.title=New Book
book.edit.header.title=Book
book.title=Title
book.author=Author</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-list-en.png" alt="Book listing">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-edit-en.png" alt="Editing a book">
</div>
</div>
<div class="paragraph">
<p>Italian:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/i18n/messages_it.properties.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>shell.book=Libri
shell.read=Leggi
book.index.header.title=Libri
book.create.header.title=Nuovo libro
book.edit.header.title=Libro
book.title=Titolo
book.author=Autore</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-list-it.png" alt="Book listing">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-edit-it.png" alt="Editing a book">
</div>
</div>
<div class="paragraph">
<p>The <em>User Menu</em> will automatically display the available languages based on the presence of their language files.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-languages.png" alt="Available languages">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_display">display()</h3>
<div class="paragraph">
<p>The most relevant feature of <em>Dueuno Elements</em> is the <code>display</code> method. It renders the GUI on the server and sends is to the browser.</p>
</div>
<div class="paragraph">
<p>You can call <code>display</code> with one or more of the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the controller to redirect to. If no <code>action</code> is specified the <code>index</code> action will be displayed</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the action to redirect to. If no <code>controller</code> is specified the current controller will be used</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The params to pass when redirecting to a <code>controller</code> or <code>action</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PageContent</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The content to display (See <a href="#contents">Contents</a>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Transition</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The transition to display (See <a href="#transitions">Transitions</a>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the content in a modal dialog or not</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wide</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will be wider.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fullscreen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will fit the whole browser window size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>closeButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will present a close button on the top-left side to let the user close the dialog cancelling the operation (Default: <code>true</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>errors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.springframework.validation.Errors</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validation errors to display (See <a href="#validation">Validation</a>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>errorMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message to display in a message box to the user</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exception</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Exception</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Exception to display in a message box to the user</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message to display in a message box to the user</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transitions">Transitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Transition is a set of instructions sent from the server to the client (browser) to alter the currently displayed content. For instance, when selecting a book from a list we want a text field to be populated with its description. To implement such behaviours we use transitions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please refer to <a href="#controls">Controls</a> and <a href="#components">Components</a> to see what events are available to each component.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Refer to <a href="#websockets">Websockets</a> to understand how to trigger events programmatically from sources other than the user input.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/ReadController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">ReadController</span> <span class="directive">implements</span> ElementsController {

    BookService bookService

    <span class="keyword">def</span> <span class="function">index</span>() {
        <span class="keyword">def</span> c = createContent(ContentForm)

        c.header.removeNextButton()

        c.form.with {
            addField(
                    <span class="type">class</span>: <span class="class">Select</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
                    <span class="key">optionsFromRecordset</span>: bookService.list(),
                    <span class="key">onChange</span>: <span class="string"><span class="delimiter">'</span><span class="content">onChangeBook</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
            )
            addField(
                    <span class="type">class</span>: <span class="class">Textarea</span>,
                    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>,
            )
        }

        display <span class="key">content</span>: c
    }

    <span class="keyword">def</span> <span class="function">onChangeBook</span>() {
        <span class="keyword">def</span> t = createTransition() <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">def</span> book = bookService.get(params.book)

        <span class="keyword">if</span> (book) {
            t.set(<span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>, book.description) <i class="conum" data-value="3"></i><b>(3)</b>
            t.set(<span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">readonly</span><span class="delimiter">'</span></span>, <span class="predefined-constant">true</span>) <i class="conum" data-value="4"></i><b>(4)</b>
        } <span class="keyword">else</span> {
            t.set(<span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>, <span class="predefined-constant">null</span>)
            t.set(<span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">readonly</span><span class="delimiter">'</span></span>, <span class="predefined-constant">false</span>)
        }

        display <span class="key">transition</span>: t
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We tell the <code>Select</code> field which action to execute when the <code>change</code> event occurs (See <a href="#events">Events</a>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We create a new Transition</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>set</code> method sets the value of the <code>description</code> field</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We also set the <code>Textarea</code> to a <code>readonly</code> state</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-transition.png" alt="onChange transition">
</div>
</div>
<div class="paragraph">
<p>To finish it up we register a Pretty Printer for the book record and tell the 'Select' control to use it to display the items.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BootStrap</span> {

    ApplicationService applicationService

    <span class="keyword">def</span> init = { servletContext -&gt;
        applicationService.init {

            registerPrettyPrinter(<span class="string"><span class="delimiter">'</span><span class="content">BOOK</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">${it.title} - ${it.author}</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>

        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A pretty printer called <code>BOOK</code> will display each book by title and author. The <code>it</code> variable refers to an instance of the book record (a <code>Map</code> in this case)</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/ReadController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">ReadController</span> <span class="directive">implements</span> ElementsController {
    ...

        addField(
                <span class="type">class</span>: <span class="class">Select</span>,
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
                <span class="key">optionsFromRecordset</span>: bookService.list(),
                <span class="key">prettyPrinter</span>: <span class="string"><span class="delimiter">'</span><span class="content">BOOK</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="key">onChange</span>: <span class="string"><span class="delimiter">'</span><span class="content">onChangeBook</span><span class="delimiter">'</span></span>,
        )

    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We configure the <code>Select</code> control to use the <code>BOOK</code> pretty printer to format the books</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-transition-pretty.png" alt="onChange transition">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When developing the application all unhandled exceptions will be rendered to the browser as follows.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In production, all the details will be hidden and just the <code>sad face</code> will be displayed.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-exception.png" alt="onChange transition">
</div>
</div>
<div class="paragraph">
<p>To display a message box instead you can add an Exception handler to the controller:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/ReadController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">ReadController</span> <span class="directive">implements</span> ElementsController {

    <span class="keyword">def</span> <span class="function">handleException</span>(<span class="exception">Exception</span> e) {
        display <span class="key">exception</span>: e
    }

    <span class="keyword">def</span> <span class="function">handleMyCustomException</span>(MyCustomException e) {
        display <span class="key">exception</span>: e
    }

}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/api-reference/reference-book-exception-handled.png" alt="onChange transition">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contents">Contents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contents are the canvas to each feature. You can create a <code>ContentBlank</code>, which is a plain empty canvas, and add <a href="#components">Components</a> to it. This is not something you will usually want to do since <em>Dueuno Elements</em> provides pre-assembled contents to be used right away.</p>
</div>
<div class="paragraph">
<p>Components are added to the content on a <em>vertical stripe</em> one after the other. We can not layout components, to create a layout we need to use the <code>Form</code> component or we can create a custom component.</p>
</div>
<div class="sect2">
<h3 id="_contentbase">ContentBase</h3>
<div class="paragraph">
<p>Embeds a <code>Header</code> and a <em>Confirm</em> <code>Button</code> that submits a component called <code>form</code> (not provided) to an action called <code>onConfirm</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contentform">ContentForm</h3>
<div class="paragraph">
<p>Extends <code>ContentHeader</code> and embeds a <code>Form</code> called <code>form</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contentcreate">ContentCreate</h3>
<div class="paragraph">
<p>Extends <code>ContentForm</code> and provides a <em>Create</em> <code>Button</code> that submits the <code>form</code> component to an action called <code>onCreate</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contentedit">ContentEdit</h3>
<div class="paragraph">
<p>Extends <code>ContentForm</code> and provides a <em>Save</em> <code>Button</code> that submits the <code>form</code> component to an action called <code>onEdit</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contentlist">ContentList</h3>
<div class="paragraph">
<p>Extends <code>ContentHeader</code> and embeds a <code>Table</code> component. Provides a <em>New</em> <code>Button</code> that redirects to an action called <code>create</code>.</p>
</div>
<div class="paragraph">
<p>The <code>Table</code> component is configured to present and <em>Edit</em> and a <em>Delete</em> <code>Button</code> for each displayed row. The <em>Edit</em> <code>Button</code> submits the raw id to an action called <code>edit</code> while the <em>Delete</em> <code>Button</code> asks for confirmation before redirecting to an action called <code>onDelete</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components">Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Everything in <em>dueuno_elements</em> is a <code>Component</code>. A component is itself a tiny web application. Each component is built with at least an HTML view, a CSS styling and a JavaScript logic. A Component can provide a supporting <code>Service</code> or <code>Controller</code>.</p>
</div>
<div class="paragraph">
<p>Unless we want to create a new component there is no need to know HTML, CSS or JavaScript to develop a <em>Dueuno Elements</em> application.</p>
</div>
<div class="paragraph">
<p>Each component extends the base class <code>Component</code> so each component share the following properties and methods.</p>
</div>
<div class="sect3">
<h4 id="_properties">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Id of the component instance. This is mandatory, it must be unique and provided in the constructor.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>visible</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Shows or hides the component without changing the layout (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>display</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays or hides the component, adding or removing it from the layout (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readonly</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Readonly controls are disabled (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skipFocus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The component won&#8217;t participate in keyboard or mouse selection (focus) (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sticky</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The component is sticky on top</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>containerSpecs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Contains instructions for the container. The container component may or may not respect them, see the documentation for the specific container component.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textColor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The text color, CSS format</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backgroundColor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Background color, CSS format</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cssClass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Custom CSS class to apply. The CSS class must be a <a href="https://getbootstrap.com/" target="_blank" rel="noopener">Bootstrap</a>] CSS class or a cusom one declared into the <code>grails-app/assets/dueuno/custom/application.css</code> file. See <a href="#custom-css">Custom CSS</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cssStyle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Custom CSS inline style.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addComponent(Map)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Adds a component as children. See <a href="#components">Components</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addControl(Map)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Adds a control as children. See <a href="#controls">Controls</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on(Map)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configures an event. See <a href="#events">Events</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="header_">Header</h3>
<div class="paragraph">
<p>A <code>Header</code> is a bar at the top of the <code>Content</code> area. It can be sticky on top or it can scroll with the content. Its main purpose is to hold navigation buttons.</p>
</div>
<div class="paragraph">
<p>A <code>Header</code> can have a <code>backButton</code> on the left and a <code>nextButton</code> on the right. In the middle we can find the <code>title</code>.</p>
</div>
<div class="sect3">
<h4 id="_properties_2">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sticky</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When set to <code>true</code> the header will stick on top. When a <code>backButton</code> or <code>nextButton</code> is added to the header than <code>sticky</code> is automatically set to <code>true</code> to let the user reach the buttons even if the content has been scrolled down. To force the header to scroll with the content explicitly set sticky to <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The title to display</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>titleArgs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Args to be used when indexing an i18n message. Eg: in <code>messages.properties</code> exists the following property <code>book.index.header.title=Books for {0} {1}</code> and <code>titleArgs = ['Mario', 'Rossi']</code>. The <code>title</code> will result in <code>Books for Mario Rossi</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An icon to be displayed before the <code>title</code>. We can choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasBackButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code> if a <code>backButton</code> has been added</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasNextButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code> if a <code>nextButton</code> has been added</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Button</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The back button object. See <a href="#button">Button</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nextButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Button</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The next button object. See <a href="#button">Button</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods_2">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addBackButton(Map)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Add the backButton. Accepts the arguments of <a href="#button">Button</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>removeBackButton()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Removes the backButton.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addNextButton(Map)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Add the nextButton. Accepts the arguments of <a href="#button">Button</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>removeNextButton()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Removes the nextButton.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="table">Table</h3>
<div class="paragraph">
<p>A <code>Table</code> is a convenient way to display a recordset.</p>
</div>
<div class="paragraph">
<p>Each table can implement some <a href="#table-filters">TableFilters</a> and each row can have its own set of action buttons. For each row, depending on the logged in user and the status of the record we can define which actions are available.</p>
</div>
<div class="sect3">
<h4 id="_properties_3">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>columns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of column names to display. Each column name must match the recordset column name to automatically display its values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">    c.table.with {
        columns = [
            <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
        ]
    }</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of key names. When specified, a new column will be created for each key. The keys will be automatically submitted when a row action is activated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    keys = [
        <span class="string"><span class="delimiter">'</span><span class="content">publisher_id</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sortable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines the sortable columns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    sortable = [
        <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines the sorting of the recordset. It takes precedence over the <code>sortable</code> property and forces the specified sorting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    sort = [
        <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">asc</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>submit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the column names whose values must be included when the table is submitted by a <a href="#button">Button</a> or <a href="#link">Link</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    submit = [
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>labels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Programmatically change the label of the specified columns.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    labels = [
        <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transformers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets a transformer to a column. Each value of that column will be processed by the specified transformer (See <a href="#_registertransformer">registerTransformer()</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    transformers = [
        <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">UPPERCASE_TITLE</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prettyPrinters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets a pretty printer to a column. Each value of that column will be processed by the specified pretty printer (See <a href="#_registerprettyprinter">registerPrettyPrinter()</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    prettyPrinter = [
        <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">UPPERCASE_TITLE</span><span class="delimiter">'</span></span>,
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prettyPrinterProperties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, Map&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets some pretty printer properties to a column. Each value of that column will be processed by the specified properties (See <a href="#pretty-printer-properties">PrettyPrinterProperties</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    prettyPrinterProperties = [
        <span class="key">salary</span>: [
            <span class="key">highlightNegative</span>: <span class="predefined-constant">false</span>,
            <span class="key">renderZero</span>: <span class="string"><span class="delimiter">'</span><span class="content">-</span><span class="delimiter">'</span></span>,
        ],
        <span class="key">name</span>: [
            <span class="key">renderMessagePrefix</span>: <span class="predefined-constant">true</span>,
        ],
    ]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stickyHeader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>true</code> the table header will stick to top when scrolling. Not available in modals (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TableFilters</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To define table filters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    filters.with {
        addField(
            <span class="type">class</span>: <span class="class">TextField</span>,
            <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
            <span class="key">cols</span>: <span class="integer">6</span>,
        )
        addField(
            <span class="type">class</span>: <span class="class">TextField</span>,
            <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
            <span class="key">cols</span>: <span class="integer">6</span>,
        )
    }
}

<span class="predefined-type">Map</span> filters = c.table.filters.values <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The submitted values of the filters fields. See <a href="#table-filters">TableFilters</a></td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowActions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the row action buttons or not (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasHeader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the table header or not (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasFooter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the table footer or not (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasPagination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the table pagination or not (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasComponents</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to render the table to host custom components on its cells or not. Enabling this feature slows down the rendering (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowHighlight</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to highlight the rows on mouse pointer hover (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowStriped</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to set the zebra style or not (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noResults</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display a box with an icon and a text when the table has no results (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noResultsIcon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The icon ti display when the table has no results. Choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noResultsMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The message to display when the table has no results.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="table-methods">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>body</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assigns a recordset to the table body (See <a href="#recordsets">Recordsets</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.body = bookService.list()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>footer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assigns a recordset to the table footer (See <a href="#recordsets">Recordsets</a>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.footer = bookService.listTotals()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>paginate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set the table will paginate the results. Must be set to the total count of the records to show.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.paginate = bookService.count()</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eachRow</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This closure gets called for each row displayed by the table. Don&#8217;t execute slow code here since it will slow down the whole table rendering.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.body.eachRow { TableRow row, <span class="predefined-type">Map</span> values -&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    row.cells[<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>] <i class="conum" data-value="2"></i><b>(2)</b>
    row.actions <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The record values</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>See <a href="#label">Label</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>See <a href="#table-row-actions">Row Actions</a></td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="recordsets">Recordsets</h4>
<div class="paragraph">
<p>What can we load a table with?</p>
</div>
<div class="sect4">
<h5 id="_list_of_lists_2">List of Lists</h5>
<div class="paragraph">
<p>Loading a table with a List of Lists is possible, the sequence will determine how each column will be mapped to each value. There is no hard relationship between the displayed column name and the value.</p>
</div>
<div class="paragraph">
<p>For this reason we suggest using <a href="#list-of-maps">List of Maps</a> instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">description</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    [<span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>],
    [<span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>],
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="list-of-maps">List of Maps</h5>
<div class="paragraph">
<p>We can load a table with a "recordset" style data structure like the List of Maps. This way each column will display exactly the value associated to the key of the record (<code>Map</code>) having the same name of the column.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    [<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">1</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>],
    [<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">2</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>],
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_list_of_pogos_2">List of POGOs</h5>
<div class="paragraph">
<p>A List of <em>Plain Old Groovy Objects</em> can also be used to load a table.</p>
</div>
<div class="paragraph">
<p>Given this POGO:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> id
    <span class="predefined-type">String</span> title
    Strng author
    <span class="predefined-type">String</span> description
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can load our table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>,
]

c.table.body = [
    <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">1</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Teachings of Don Juan</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Carlos Castaneda</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice fictional book</span><span class="delimiter">'</span></span>),
    <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">2</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">The Antipodes of the Mind</span><span class="delimiter">'</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Benny Shanon</span><span class="delimiter">'</span></span>, <span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is a nice scientific book</span><span class="delimiter">'</span></span>),
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_gorm_recordsets_2">GORM Recordsets</h5>
<div class="paragraph">
<p>Using a <a href="https://gorm.grails.org/latest/hibernate/manual/" target="_blank" rel="noopener">GORM Recordset</a> is an easy way to load a table. See how to build a <a href="../user-guide/4-building-applications.html#building-crud">CRUD</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.columns = [
    <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
    <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
]

c.table.body = TBook.list()
c.table.paginate = TBook.count()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="table-row-actions">Row Actions</h4>
<div class="paragraph">
<p>There are two ways to configure row actions. All at once and on a row basis. To set all rows to have the same actions we can set them up in the table namespace as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]
    actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">borrow</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">return</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#button">Button</a> for all the <code>Button</code> properties</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we need to configure the row actions depending on the record values or other logics we can do it from the <code>eachRow</code> closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]

    body.eachRow {
        <span class="keyword">if</span> (values.borrowed) {
            row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">return</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
        } <span class="keyword">else</span> {
            row.actions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">borrow</span><span class="delimiter">'</span></span>)
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#button">Button</a> for all the <code>Button</code> properties</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="table-group-actions">Group Actions</h4>
<div class="paragraph">
<p>The table can be configured to select multiple rows ad apply to all of them the same action.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    columns = [
        <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
    ]

    groupActions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">return</span><span class="delimiter">'</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    groupActions.addAction(<span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">borrow</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#button">Button</a> for all the <code>Button</code> properties</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="table-filters">TableFilters</h3>
<div class="paragraph">
<p>Each table can have its own search <code>Form</code> to filter results. When submitting the filters, the action containing them will be reloaded and the filters values will be available in the Grails <code>params</code> map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.table.with {
    filters.with {
        addField(
            <span class="type">class</span>: <span class="class">Select</span>,
            <span class="key">optionsFromRecordset</span>: bookService.list(),
            <span class="key">prettyPrinter</span>: <span class="string"><span class="delimiter">'</span><span class="content">BOOK</span><span class="delimiter">'</span></span>,
            <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
            <span class="key">cols</span>: <span class="integer">4</span>,
        )
        addField(
            <span class="type">class</span>: <span class="class">TextField</span>,
            <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">search</span><span class="delimiter">'</span></span>,
            <span class="key">cols</span>: <span class="integer">8</span>,
        )
    }

    <span class="predefined-type">Map</span> filters = c.table.filters.values <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The submitted values of the filters fields.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_properties_4">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isFiltering</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code> if the filters form has values in its fields</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fold</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the filters form is displayed as folded or not at its first appearance. After that its folded state will be stored in the session (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoFold</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to <code>true</code> the filters form will be folded each time a search is submitted (Default: <code>false</code>)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods_3">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addField()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Adds a form field. See <a href="#form-field">FormField</a> and <a href="#controls">Controls</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="form">Form</h3>
<div class="paragraph">
<p>A form is the component we use to layout <a href="#components">Components</a> and <a href="#controls">Controls</a>. <code>Form</code> implements the grid system, once activated we have 12 columns we can use to arrange form fields horizontally.</p>
</div>
<div class="paragraph">
<p>When the application is accessed from a mobile phone all the fields will be displayed in a single column. This makes them usable when the available space is not enough to organise them in a meaningful way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    grid = <span class="predefined-constant">true</span>
    addField(
        <span class="type">class</span>: <span class="class">TextField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>,
        <span class="key">cols</span>: <span class="integer">6</span>,
    )
    addField(
        <span class="type">class</span>: <span class="class">TextField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>,
        <span class="key">cols</span>: <span class="integer">6</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_5">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>grails.validation.Validateable</code> class or a GORM domain class used to automatically render the field as required. A red <code>*</code> will be displayed next to the field label if appropriate.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to activate the grid system or not (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readonly</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets all the form fields readonly (Default: <code>false</code>)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods_4">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addField()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Adds a form field. See <a href="#form-field">FormField</a> and <a href="#controls">Controls</a></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="form-field">FormField</h3>
<div class="paragraph">
<p>A form field wraps a <code>Control</code> with a label and sets it into the grid system. A <code>FormField</code> is automatically created each time we add a field to a <code>Form</code> calling its <code>addField()</code> method.</p>
</div>
<div class="sect3">
<h4 id="_properties_6">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>component</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Component</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The contained component</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The field label</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>labelArgs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of objects to pass to the localized message (Eg. when using <code>{0}</code> in <code>message.properties</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helpMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A help message</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helpMessageArgs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of objects to pass to the localized message (Eg. when using <code>{0}</code> in <code>message.properties</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nullable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the field as nullable or not. If set will override the form <code>validate</code> logic (See <a href="#form">Form</a>) (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>displayLabel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to <code>false</code> the label will not be displayed. The space occupied by the label will be taken off the screen resulting in a different vertical positioning of the <code>Control</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cols</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Defines how many columns of the grid system will be used to span the <code>Control</code> to. Its value must be between <code>1</code> and <code>12</code> included.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rows</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the <code>Control</code> is a <code>multiline</code> one we can set how many lines it is going to occupy.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="button">Button</h3>
<div class="paragraph">
<p>Buttons are key components of the GUI. We use buttons to let the user trigger actions. The <code>Button</code> component can provide the user with multiple actions to be executed.</p>
</div>
<div class="paragraph">
<p>A single button can display two directly accessible actions, the <code>defaultAction</code> and <code>tailAction</code> and a menu with a list of links, the <code>actionMenu</code>.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>defaultAction</code></th>
<th class="tableblock halign-left valign-top"><code>tailAction</code></th>
<th class="tableblock halign-left valign-top"><code>actionMenu</code></th>
</tr>
</thead>
</table>
<div class="paragraph">
<p>A simple button will have just the <code>defaultAction</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    <span class="keyword">def</span> addBookField = addField( <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="type">class</span>: <span class="class">Button</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">addBook</span><span class="delimiter">'</span></span>,
        <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">addBook</span><span class="delimiter">'</span></span>,
        <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
    )

    <span class="keyword">def</span> button = addBookField.component
    button.addAction(<span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">addAuthor</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A <code>Button</code> can be initialized with the properties of an event (See <a href="#events">Events</a> and <code>Link</code> (See <a href="#link">Link</a>)</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_properties_7">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultAction</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Menu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The default action</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tailAction</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Menu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The tail action</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>actionMenu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Menu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The action menu</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>primary</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When set to <code>true</code> the button color will use the <code>PRIMARY_BACKGROUND_COLOR</code> and <code>PRIMARY_TEXT_COLOR</code> tenant properties indicating that its role in the GUI is primary (See <a href="#tenant-properties">Tenant Properties</a>) (Default: <code>false</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stretch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set to <code>true</code> to let the button fill all the available horizontal space (Default: <code>false</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to <code>true</code> all actions of the button will be displayed inline and directly accessible (Default: <code>false</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxWidth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The max width in pixels that the button can reach.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>click</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The event is triggered on mouse click or finger tab on touch devices</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="menu">Menu</h3>
<div class="paragraph">
<p>A menu is the component we use to organize the <code>Shell</code> and <code>Button</code> menus. It can hold a tree of items with a parent-children structure but we use only one level to group items (See <a href="#features">Features</a>).</p>
</div>
<div class="paragraph">
<p>This component is meant for internal use only.</p>
</div>
</div>
<div class="sect2">
<h3 id="link">Link</h3>
<div class="paragraph">
<p>Links are everywhere, they are in the <code>Shell</code> menus, in <code>Buttons</code> actions, <code>TextField</code> or <code>Select</code> actions, and they can be used as stand alone. Links and buttons share the same properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField( <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="type">class</span>: <span class="class">Link</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">addBook</span><span class="delimiter">'</span></span>,
        <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">addBook</span><span class="delimiter">'</span></span>,
        <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
        <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-book</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A <code>Link</code> can be initialized with the properties of a <a href="#label">Label</a> and an event (See <a href="#events">Events</a>)</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_properties_8">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Icon that graphically represents the link. Choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An SVG image that graphically represents the link. If specified a corresponding file must exist in the <code>grails-app/assets</code> folder.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A label that describes the link, usually a code found in <code>messages.properties</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Point to a specific URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>direct</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to render the whole html page (or raw http body) or a Transition</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set a target name to open the page into a new browser tab. All links with te same target will display in the same tab.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>targetNew</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to <code>true</code> the link will display on a new tab each time it is clicked</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the content in a modal dialog or not</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wide</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will be wider.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fullscreen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will fit the whole browser window size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>closeButton</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When displaying the content as <code>modal</code> the dialog will present a close button on the top-left side to let the user close the dialog cancelling the operation (Default: <code>true</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set to <code>true</code> the browser address bar will be updated with the link destination URL, otherwise the browser will not update its address bar (Default: <code>false</code>) NOTE: Accessing from a mobile phone the address bar will never be updated to enhance the user experience.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>animate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Can be set to <code>fade</code>, <code>next</code> and <code>back</code>. At the moment only <code>fade</code> is implemented as a graphical transition when changing content.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>infoMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If specified an info message will pop up, the link will never be executed</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confirmMessage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If specified a confirm message will pop up giving the user a chance to cancel the action</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_2">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>click</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The event is triggered on mouse click or finger tap on touch devices</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="label">Label</h3>
<div class="paragraph">
<p>A <code>Label</code> is a canvas for text and custom HTML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">Label</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">label</span><span class="delimiter">'</span></span>,
        <span class="key">html</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;b&gt;This is a bold statement!&lt;/b&gt;</span><span class="delimiter">'</span></span>,
        <span class="key">textAlign</span>: TextAlign.END,
        <span class="key">textWrap</span>: TextWrap.LINE_WRAP,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_9">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The text to display. If itâ€™s a <code>Boolean</code> value a check will be displayed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>html</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An html string, useful to format text or insert links</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If specified the <code>text</code> will be a link to this URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An icon to display before the text, you can choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textAlign</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TextAlign</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Determines the text horizontal alignment. It can be set to <code>DEFAULT</code>, <code>START</code>, <code>END</code> or <code>CENTER</code> (Default: <code>DEFAULT</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textWrap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TextWrap</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Determines how the text is wrapped:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>NO_WRAP</code> The text will be displayed in one line</p>
</li>
<li>
<p><code>SOFT_WRAP</code> The text will wrap when the max width of the container is reached. Lines breaks are NOT considered.</p>
</li>
<li>
<p><code>LINE_WRAP</code> Each line will be displayed in one line until the max width of the container is reached. Line breaks are taken in consideration.</p>
</li>
<li>
<p><code>LINE_BREAK</code> Each line will be displayed in one line. Line breaks are taken in consideration.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monospace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use a monospaced font instead of the default one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>border</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Draws a coloured background. Useful when we want to display the label in a different color.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderBoolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>true</code> a check symbol will be displayed, otherwise the text <code>true</code> or <code>false</code> will be displayed (Default: <code>true</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="separator">Separator</h3>
<div class="paragraph">
<p>Wa can use separators to space between a set of fields and another one in a form.</p>
</div>
<div class="sect3">
<h4 id="_properties_10">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>squeeze</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reduces the space the separator will introduce leaving just the space for the label</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="key-press">KeyPress</h3>
<div class="paragraph">
<p>We use the <code>KeyPress</code> component to intercept key pressed by the user on the GUI. Its main use is to integrate barcode readers but it can be used for any other scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> c = createContent(ContentList)
c.addComponent(
    <span class="type">class</span>: <span class="class">KeyPress</span>,
    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">keyPress</span><span class="delimiter">'</span></span>,
    <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onKeyPress</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#events">Events</a> to configure the event</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_properties_11">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>triggerKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key pressed are stored into a buffer until a trigger key is pressed. When this happens the configured event is called. The trigger key can be any character or <code>Enter</code>. If set to blank <code>''</code> each key pressed will be immediately sent (Default: <code>Enter</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controls">Controls</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls are Components that can hold a value. Controls are the main way to interact with the application. We mainly use controls in forms to easily submit their values.</p>
</div>
<div class="sect2">
<h3 id="text-field">TextField</h3>
<div class="paragraph">
<p>A text field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.addField(
    <span class="type">class</span>: <span class="class">TextField</span>,
    <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">username</span><span class="delimiter">'</span></span>,
    <span class="key">icon</span>: <span class="string"><span class="delimiter">'</span><span class="content">fa-user</span><span class="delimiter">'</span></span>,
)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_12">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An icon to display within the control, you can choose one from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A text to display before the edit area of the control</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of characters the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>placeholder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A text to display when the text area is empty</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monospace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>yyy</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use a monospaced font instead of the default one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textTransform</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TextTransform</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Transforms the input while typing. It may be one of the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>UPPERCASE</code></p>
</li>
<li>
<p><code>LOWERCASE</code></p>
</li>
<li>
<p><code>CAPITALIZE</code> each word</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A RegEx pattern to accept only specific input (Eg. <code>'^[0-9\\.\\,]*$'</code> will accept only numbers, dots and columns)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods_5">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addAction()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Adds an action button at the end of the control. See <a href="#link">Link</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_3">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="select">Select</h3>
<div class="paragraph">
<p>Displays a list of options to choose from.</p>
</div>
<div class="sect3">
<h4 id="_properties_13">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>optionsFromRecordset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;Map&gt;</code> or <code>List&lt;Object&gt;</code> or <code>GORM Recordset</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Options will be set from the recordset</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>optionsFromList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Options will be set from the List items. The key of each item will match the value of the item itself.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>optionsFromEnum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enum</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Options will be set from the Enum. The key of each item will match the value of the item itself.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>options</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Options will be set from the Map items (key/value)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of column names to submit as the key for the selected option (Default: <code>['id']</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prettyPrinter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Class</code> or <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use the specified pretty printer to display the options. See <a href="#_registerprettyprinter">registerPrettyPrinter()</a>. If the registered pretty printer <code>Class</code> matches the item class, the pretty printer will be automatically applied.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transformer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the transformer to use to display the options. See <a href="#_registertransformer">registerTransformer()</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>messagePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prefix to add to each item so it can be referred in <code>message.properties</code> files to localise it</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderMessagePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display the <code>messagePrefix</code> or not (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>placeholder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays a text when no option is selected</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allowClear</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>true</code> the selection can be cleared</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoSelect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When there is only one available option in the list it will be automatically selected (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multiple</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables multiple selections (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displays a search box to filter the available options. It works on the client side, to search on the server we need to user the <code>search</code> event.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monospace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use a monospaced font instead of the default one</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>searchMinInputLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum number of characters to input before the search on the server can start. Works in combination with the <code>search</code> event.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_methods_6">Methods</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Select.optionsFromRecordset(recordset: &#8230;&#8203;)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>Map</code> of options to be used in a transition. See <a href="#select-server-search">Search on server</a>. Accepts a <code>Map</code>, you can set the following arguments: <code>keys</code>, <code>keysSeparator</code>, <code>prettyPrinter</code>, <code>transformer</code>, <code>messagePrefix</code>, <code>renderMessagePrefix</code>, <code>locale</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Select.optionsFromList(list: &#8230;&#8203;)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>Map</code> of options to be used in a transition. See <a href="#select-server-search">Search on server</a>. Accepts a <code>Map</code>, you can set the above arguments.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Select.optionsFromEnum(enum: &#8230;&#8203;)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>Map</code> of options to be used in a transition. See <a href="#select-server-search">Search on server</a>. Accepts a <code>Map</code>, you can set the above arguments.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Select.options(options: &#8230;&#8203;)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns a <code>Map</code> of options to be used in a transition. See <a href="#select-server-search">Search on server</a>. Accepts a <code>Map</code>, you can set the above arguments.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_4">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when <code>searchMinInputLength</code> is reached</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="select-server-search">Search on server</h4>
<div class="paragraph">
<p>Example of setting up a server search.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">Select</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">activity</span><span class="delimiter">'</span></span>,
        <span class="key">onLoad</span>: <span class="string"><span class="delimiter">'</span><span class="content">onActivityLoad</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="key">onChange</span>: <span class="string"><span class="delimiter">'</span><span class="content">onActivityChange</span><span class="delimiter">'</span></span>,
        <span class="key">onSearch</span>: <span class="string"><span class="delimiter">'</span><span class="content">onActivitySearch</span><span class="delimiter">'</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="key">searchMinInputLength</span>: <span class="integer">0</span>, <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
        <span class="key">allowClear</span>: <span class="predefined-constant">true</span>,
    )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>load</code> event must return a single option to display</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>search</code> event will return a list of matching options</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If <code>0</code> then the <code>search</code> event will be triggered as soon as the user clicks on the control to open the options list.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We need to create the following actions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">ActivityService activityService

<span class="keyword">def</span> <span class="function">onActivityLoad</span>() {
    <span class="keyword">def</span> t = createTransition()
    <span class="keyword">def</span> activities = activityService.list(<span class="key">id</span>: params.activity) <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> options = Select.optionsFromRecordset(<span class="key">recordset</span>: activities)
    t.set(<span class="string"><span class="delimiter">'</span><span class="content">activity</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">options</span><span class="delimiter">'</span></span>, options)
    display <span class="key">transition</span>: t
}

<span class="keyword">def</span> <span class="function">onActivityChange</span>() {
    <span class="keyword">def</span> t = createTransition()
    <span class="comment">// Do something...</span>
    display <span class="key">transition</span>: t
}

<span class="keyword">def</span> <span class="function">onActivitySearch</span>() {
    <span class="keyword">def</span> t = createTransition()
    <span class="keyword">def</span> activities = activityService.list(<span class="key">find</span>: params.activity) <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">def</span> options = Select.optionsFromRecordset(<span class="key">recordset</span>: activities)
    t.set(<span class="string"><span class="delimiter">'</span><span class="content">activity</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">options</span><span class="delimiter">'</span></span>, options)
    display <span class="key">transition</span>: t
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>params.activity</code> will hold the selected id</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>params.activity</code> will hold the search string</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checkbox">Checkbox</h3>
<div class="paragraph">
<p>A checkbox is a way to interact with <code>Boolean</code> values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">Checkbox</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">fullscreen</span><span class="delimiter">'</span></span>,
        <span class="key">displayLabel</span>: <span class="predefined-constant">false</span>,
        <span class="key">cols</span>: <span class="integer">3</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_14">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The text to display</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_5">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>click</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not implemented yet</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="multiple-checkbox">MultipleCheckbox</h3>
<div class="paragraph">
<p>Manage multiple checkboxes as it was a Select control with many options. See <a href="#select">Select</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="textarea">Textarea</h3>
<div class="paragraph">
<p>A text area who can span multiple lines of a form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">Textarea</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">textarea</span><span class="delimiter">'</span></span>,
        <span class="key">maxSize</span>: <span class="integer">100</span>,
        <span class="key">cols</span>: <span class="integer">12</span>,
        <span class="key">rows</span>: <span class="integer">5</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_15">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of characters the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>monospace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Use a monospaced font instead of the default one</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_6">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="quantity-field">QuantityField</h3>
<div class="paragraph">
<p>A text field to input quantities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">QuantityField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">quantity</span><span class="delimiter">'</span></span>,
        <span class="key">defaultUnit</span>: QuantityUnit.KM,
        <span class="key">availableUnits</span>: quantityService.listAllUnits(),
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_16">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>How many decimal digits are allowed (Default: <code>2</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>negative</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If negative values are allowed (Default: <code>false</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unitOptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A list of units to select from</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultUnit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QuantityUnit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The default unit to display</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_7">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="money-field">MoneyField</h3>
<div class="paragraph">
<p>A text field to input currency values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">MoneyField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">salary</span><span class="delimiter">'</span></span>,
        <span class="key">decimals</span>: <span class="integer">0</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_17">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>How many decimal digits are allowed (Default: <code>2</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>negative</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If negative values are allowed (Default: <code>false</code>).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_8">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="number-field">NumberField</h3>
<div class="paragraph">
<p>A text field to manage number values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">NumberField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">number</span><span class="delimiter">'</span></span>,
        <span class="key">min</span>: -<span class="integer">2</span>,
        <span class="key">max</span>: <span class="integer">10</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_18">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>How many decimal digits are allowed (Default: <code>2</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>negative</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If negative values are allowed (Default: <code>false</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum number the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum number the user can input</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_9">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="date-field">DateField</h3>
<div class="paragraph">
<p>A control to input a date.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">DateField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">dateStart</span><span class="delimiter">'</span></span>,
        <span class="key">min</span>: LocalDate.now().minusDays(<span class="integer">3</span>),
        <span class="key">max</span>: LocalDate.now().plusDays(<span class="integer">3</span>),
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_19">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalDate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum date the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalDate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum date the user can input</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_10">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="time-field">TimeField</h3>
<div class="paragraph">
<p>A control to input a time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">TimeField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">time</span><span class="delimiter">'</span></span>,
        <span class="key">min</span>: LocalTime.now().minusHours(<span class="integer">3</span>),
        <span class="key">timeStep</span>: <span class="integer">10</span>,
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_20">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalTime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum time the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalTime</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum time the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeStep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of minutes the user can select. For example if set to <code>15</code> the only available time selections are <code>00</code>, <code>15</code>, <code>30</code> and <code>45</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_11">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="datetime-field">DateTimeField</h3>
<div class="paragraph">
<p>A control to input a date and time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">DateTimeField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">datetime</span><span class="delimiter">'</span></span>,
        <span class="key">min</span>: LocalDate.now().minusDays(<span class="integer">3</span>),
    )
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_properties_21">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalDate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimum date the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalDate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Maximum date the user can input</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeStep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of minutes the user can select. For example if set to <code>15</code> the only available time selections are <code>00</code>, <code>15</code>, <code>30</code> and <code>45</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_events_12">Events</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered once the content is loaded</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>change</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Triggered when the value changes</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="email-field">EmailField</h3>
<div class="paragraph">
<p>A control to input an email. See <a href="#text-field">TextField</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">EmailField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">email</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="telephone-field">TelephoneField</h3>
<div class="paragraph">
<p>A control to input a telephone number. See <a href="#text-field">TextField</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">TelephoneField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">telephone</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="url-field">UrlField</h3>
<div class="paragraph">
<p>A control to input a URL. See <a href="#text-field">TextField</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">UrlField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">url</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="password-field">PasswordField</h3>
<div class="paragraph">
<p>A control to input a password. See <a href="#text-field">TextField</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">PasswordField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">password</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hidden-field">HiddenField</h3>
<div class="paragraph">
<p>A control to store a value without displaying it to the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">HiddenField</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">hidden</span><span class="delimiter">'</span></span>,
        <span class="key">value</span>: <span class="string"><span class="delimiter">'</span><span class="content">This is not visible but it will be submitted</span><span class="delimiter">'</span></span>,
    )
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events">Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each <code>Component</code> can trigger one or more events. Please see <a href="#components">Components</a> and <a href="#controls">Controls</a> to see what events each specific component can trigger.</p>
</div>
<div class="paragraph">
<p>Each available event has a lowercase name. We can configure the event directly when creating a component as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    addField(
        <span class="type">class</span>: <span class="class">Select</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
        <span class="key">onChange</span>: <span class="string"><span class="delimiter">'</span><span class="content">onChangeBook</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
    )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The parameter name is composed by <code>on</code> followed by the capitalized name of the event (the event <code>change</code> in this case). The parameter value is the name of the action to be called.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Multiple events can be configured as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.form.with {
    <span class="keyword">def</span> books = addField(
        <span class="type">class</span>: <span class="class">Select</span>,
        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span>,
    ).component <i class="conum" data-value="1"></i><b>(1)</b>

    books.with {
        on( <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="key">event</span>: <span class="string"><span class="delimiter">'</span><span class="content">load</span><span class="delimiter">'</span></span>,
            <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onLoadBooks</span><span class="delimiter">'</span></span>,
        )
        on( <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="key">event</span>: <span class="string"><span class="delimiter">'</span><span class="content">change</span><span class="delimiter">'</span></span>,
            <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">onChangeBook</span><span class="delimiter">'</span></span>,
            <span class="key">submit</span>: [<span class="string"><span class="delimiter">'</span><span class="content">form</span><span class="delimiter">'</span></span>],
        )
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We reference the component hold by the <code>FormField</code>, not the form field itself</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Configuring the <code>load</code> event</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Configuring the <code>change</code> event</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following properties can be specified when configuring an event on a component.</p>
</div>
<div class="sect3">
<h4 id="_properties_22">Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controller</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the controller to redirect to. If no <code>action</code> is specified the <code>index</code> action will be displayed</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the action to redirect to. If no <code>controller</code> is specified and we are in the context of a web request (Eg. it&#8217;s a user triggered event) the current controller will be used. If we are configuring the event outside of a web request (Eg. sending an event from a job) a <code>controller</code> must be specified.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map&lt;String, Object&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The params to pass when redirecting to a <code>controller</code> or <code>action</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>submit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name list of the components whose values we want to submit. Each component is responsible to define the data structure for the values it contains. The default behaviour will send the values of all the controls contained within the component.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pretty-printer-properties">PrettyPrinterProperties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every value in <em>Dueuno Elements</em> gets displayed by the <code>PrettyPrinter</code> subsystem. <a href="#components">Components</a> and <a href="#controls">Controls</a> can be configured to override the user settings and the system settings. Refer to the documentation of each component to see how those settings can be configured.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prettyPrinter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Class</code> or <code>String</code> name of the pretty printer</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>transformer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Transformer name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Locale</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderMessagePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default: <code>false</code>, set to <code>true</code> to translate the value into <code>message.properties</code> files</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>messagePrefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Add or change the message prefix</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>messageArgs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Add args for the i18n message</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderBoolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>false</code> renders the text <code>true/false</code> otherwise renders a check symbol when <code>true</code> and nothing when <code>false</code> (Defaults: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>highlightNegative</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the value is <code>&lt; 0</code> the text will be highlighted in red (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderZero</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If the value is 0 render the specified string instead</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>LocalDateTime</code> values, whether to render the DATE part or not</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderDatePattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Change the way the date is rendered (See <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html" target="_blank" rel="noopener">DateTimeFormatter</a>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>LocalDateTime</code> values, whether to render the TIME part or not</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderSeconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>LocalTime</code> values, whether to display the seconds or not</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderDelimiter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Map</code> and <code>List</code> values, use this delimiter to list the items (Default: <code>', '</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Number</code> values, how many decimals digits to display</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decimalFormat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Number</code> values, which decimal separator to use. It can be <code>ISO_COM</code> (,) or <code>ISO_DOT</code> (.) (Default: <code>ISO_COM</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefixedUnit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Quantity</code> and <code>Money</code> values, whether to display the unit of measure before or after the value (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>symbolicCurrency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Money</code> values, whether to display the currency with a symbolic or ISO code (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>symbolicQuantity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Quantity</code> values, whether to display the unit of measure with a symbolic or SI code (Default: <code>true</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>invertedMonth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Date</code> values, whether to display month/day/year (<code>true</code>) or day/month/year (<code>false</code>) (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>twelveHours</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>Time</code> values, whether to display 12H (<code>true</code>, uses AM/PM) or 24H (<code>false</code>) (Default: <code>false</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstDaySunday</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether to display Sunday as the first day of the week (<code>true</code>) or not (Default: <code>false</code>)</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="websockets">Websockets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tenant-properties">Tenant Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system-properties">System Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-css">Custom CSS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-js">Custom JavaScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.x-SNAPSHOT<br>
Last updated 2024-11-26 11:37:10 +0100
</div>
</div>
</body>
</html>